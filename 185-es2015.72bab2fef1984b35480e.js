(self.webpackChunkprog_tools=self.webpackChunkprog_tools||[]).push([[185],{2185:function(t,e,n){"use strict";n.r(e),n.d(e,{CountdownModule:function(){return C}});var i=n(1552),s=n(1095),o=n(8583),c=n(6983),r=n(7716);class a{constructor(t,e){this.id=t,this.activationTimer=e}}var d=n(9765),u=n(9112),l=n(4190),p=n(6782),m=n(8002),h=n(7519),g=n(8345),w=n(9761);let T=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Xpm({type:t,selectors:[["app-count-down-dial"]],inputs:{value:"value"},decls:9,vars:1,consts:[[1,"dial"],[1,"time"]],template:function(t,e){1&t&&(r.TgZ(0,"div",0),r.TgZ(1,"div"),r.TgZ(2,"button"),r._uU(3,"+"),r.qZA(),r.qZA(),r.TgZ(4,"div",1),r._uU(5),r.qZA(),r.TgZ(6,"div"),r.TgZ(7,"button"),r._uU(8,"-"),r.qZA(),r.qZA(),r.qZA()),2&t&&(r.xp6(5),r.Oqu(e.value))},styles:[".dial[_ngcontent-%COMP%]{display:flex;flex-direction:column}.time[_ngcontent-%COMP%]{text-align:center}"]}),t})(),f=(()=>{class t{constructor(t){this.cdr=t,this._onDestroy$=new d.xQ,this.deleteClicked=new r.vpe,this.completed=new r.vpe}ngOnInit(){}ngOnChanges(t){if(t.countDownData){const e=t.countDownData.currentValue;e&&this.setTimer(e.activationTimer)}if(t.passedSeconds$){this.subscription&&this.subscription.unsubscribe();const e=t.passedSeconds$.currentValue;e&&(this.subscription=e.pipe((0,p.R)(this._onDestroy$),(0,p.R)(this.completed)).subscribe(t=>{let e=this.countDownData.activationTimer-t;this.setTimer(e),this.cdr.markForCheck(),e<=0&&this.completed.emit()}))}}ngOnDestroy(){l.l.onComponentDestroyed(this._onDestroy$)}reset(){this.setTimer(this.countDownData.activationTimer)}setTimer(t){t<0||(this.ss=t%60,this.mm=(t=t/60|0)%60,this.hh=t=t/60|0)}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(r.sBO))},t.\u0275cmp=r.Xpm({type:t,selectors:[["app-count-down-timer"]],inputs:{countDownData:"countDownData",passedSeconds$:"passedSeconds$"},outputs:{deleteClicked:"deleteClicked",completed:"completed"},features:[r.TTD],decls:8,vars:4,consts:[[1,"timer"],[3,"value"],[1,"controls-container"],["mat-flat-button","","color","warn","aria-label","Delete the countdown",1,"controls","delete",3,"click"],[3,"inline"]],template:function(t,e){1&t&&(r.TgZ(0,"div",0),r._UZ(1,"app-count-down-dial",1),r._UZ(2,"app-count-down-dial",1),r._UZ(3,"app-count-down-dial",1),r.TgZ(4,"div",2),r.TgZ(5,"button",3),r.NdJ("click",function(){return e.deleteClicked.emit()}),r.TgZ(6,"mat-icon",4),r._uU(7,"delete"),r.qZA(),r.qZA(),r.qZA(),r.qZA()),2&t&&(r.xp6(1),r.Q6J("value",e.hh),r.xp6(1),r.Q6J("value",e.mm),r.xp6(1),r.Q6J("value",e.ss),r.xp6(3),r.Q6J("inline",!0))},directives:[T,s.lW,i.Hw],styles:[".timer[_ngcontent-%COMP%]{display:flex;box-shadow:0 0 8px 2px #888;border-radius:9px;padding-left:2px}.controls-container[_ngcontent-%COMP%]{display:flex;margin-left:5px;flex-direction:column}.controls[_ngcontent-%COMP%]{min-width:20px}.controls.delete[_ngcontent-%COMP%]{padding:0 10px;line-height:20px}"]}),t})();var x=n(2541);function y(t,e){if(1&t){const t=r.EpF();r.TgZ(0,"app-count-down-timer",3),r.NdJ("deleteClicked",function(){const e=r.CHM(t).$implicit;return r.oxw().onDeleteClicked(e.id)})("completed",function(){const e=r.CHM(t),n=e.$implicit,i=e.index;return r.oxw().onTimerCompleted(n.id,i)}),r.qZA()}if(2&t){const t=e.$implicit,n=e.index,i=r.oxw();r.Q6J("countDownData",t)("passedSeconds$",i.runIndividually&&i.runningIndex!=n?null:i.passedSeconds$)}}let Z=(()=>{class t{constructor(t,e){this.cdr=e,this.destroy$=new d.xQ,this.onReset$=new d.xQ,this.nextId=0,this.isPlaying=!1,this.passedTime=0,this.runIndividually=!0,this.sort=!1,this.replay=!0,this.countdownTimers=[],this.passedSecondsSubject=new d.xQ,this.runningIndex=0,this.tickPerSecond$=t.getSeconds$().pipe((0,p.R)(this.destroy$),(0,m.U)(t=>t/1e3|0),(0,h.x)())}get passedSeconds$(){return this.passedSecondsSubject.pipe((0,g.B)())}ngOnInit(){this.countdownTimers=this.countdownTimers.concat(this.createNewTimerData()).concat(this.createNewTimerData()).concat(this.createNewTimerData())}ngOnDestroy(){this.passedSecondsSubject.complete(),l.l.onComponentDestroyed(this.destroy$)}onAddGroup(){this.countdownTimers=this.countdownTimers.concat(this.createNewTimerData()),this.sort&&(this.countdownTimers=this.countdownTimers.sort((t,e)=>t.activationTimer-e.activationTimer))}onDeleteClicked(t){this.countdownTimers=this.countdownTimers.filter(e=>e.id!==t)}trackTimerFn(t,e){return e.id}togglePlay(){if(this.isPlaying=!this.isPlaying,this.isPlaying){const t=this.onReset$.pipe((0,w.O)(void 0));this.subscription=(0,u.aj)([this.tickPerSecond$,t]).subscribe(()=>this.passedSecondsSubject.next(this.passedTime++))}else this.subscription&&this.subscription.unsubscribe()}createNewTimerData(){return new a(this.nextId++,1+(10*Math.random()|0))}onTimerCompleted(t,e){if(this.runIndividually){if(this.passedTime=1,this.runningIndex++,this.runningIndex>=this.countdownTimers.length){if(!this.replay)return;this.reset()}this.cdr.detectChanges(),this.onReset$.next()}}reset(){this.passedTime=0,this.runningIndex=0,this.childTimerComponents.forEach(t=>t.reset()),this.cdr.detectChanges(),this.onReset$.next()}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(x.u),r.Y36(r.sBO))},t.\u0275cmp=r.Xpm({type:t,selectors:[["app-count-down-group"]],viewQuery:function(t,e){if(1&t&&r.Gf(f,5),2&t){let t;r.iGM(t=r.CRH())&&(e.childTimerComponents=t)}},inputs:{runIndividually:"runIndividually",sort:"sort",replay:"replay"},decls:11,vars:3,consts:[[1,"container"],["class","group-item",3,"countDownData","passedSeconds$","deleteClicked","completed",4,"ngFor","ngForOf","ngForTrackBy"],["mat-fab","","color","primary","aria-label","add new timer to the group",1,"group-item",3,"click"],[1,"group-item",3,"countDownData","passedSeconds$","deleteClicked","completed"]],template:function(t,e){1&t&&(r.TgZ(0,"div",0),r.YNc(1,y,1,2,"app-count-down-timer",1),r.TgZ(2,"button",2),r.NdJ("click",function(){return e.onAddGroup()}),r.TgZ(3,"mat-icon"),r._uU(4,"add"),r.qZA(),r.qZA(),r.TgZ(5,"button",2),r.NdJ("click",function(){return e.togglePlay()}),r.TgZ(6,"mat-icon"),r._uU(7),r.qZA(),r.qZA(),r.TgZ(8,"button",2),r.NdJ("click",function(){return e.reset()}),r.TgZ(9,"mat-icon"),r._uU(10,"refresh"),r.qZA(),r.qZA(),r.qZA()),2&t&&(r.xp6(1),r.Q6J("ngForOf",e.countdownTimers)("ngForTrackBy",e.trackTimerFn),r.xp6(6),r.Oqu(e.isPlaying?"pause":"play_arrow"))},directives:[o.sg,s.lW,i.Hw,f],styles:[".container[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;padding:5px;border:1px solid rgba(39,35,35,.726)}.container[_ngcontent-%COMP%]   .group-item[_ngcontent-%COMP%]{margin:5px}"]}),t})();const v=[{path:"",component:(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Xpm({type:t,selectors:[["app-countdown"]],decls:4,vars:0,template:function(t,e){1&t&&(r.TgZ(0,"div"),r.TgZ(1,"div"),r._UZ(2,"app-count-down-group"),r._UZ(3,"app-count-down-group"),r.qZA(),r.qZA())},directives:[Z],styles:["app-count-down-group[_ngcontent-%COMP%]{display:block;margin-bottom:16px}"]}),t})()}];let b=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({imports:[[c.Bz.forChild(v)],c.Bz]}),t})(),C=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({imports:[[o.ez,b,s.ot,i.Ps]]}),t})()}}]);