(self.webpackChunkprog_tools=self.webpackChunkprog_tools||[]).push([[871],{6871:function(t,n,e){"use strict";e.r(n),e.d(n,{CountdownModule:function(){return M}});var i=e(1552),o=e(1095),s=e(8583),c=e(6983),r=e(7716);class a{constructor(t,n){this.id=t,this.timerFullDuration=n}}var d=e(9765),l=e(9112),u=e(4190),p=e(6782),m=e(8002),h=e(7519),g=e(8345),f=e(9761);let w=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=r.Xpm({type:t,selectors:[["app-count-down-dial-view"]],inputs:{hh:"hh",mm:"mm",ss:"ss"},decls:10,vars:3,consts:[[1,"dial","hour","time"],[1,"dial"],[1,"dial","min","time"],[1,"dial","se","time"]],template:function(t,n){1&t&&(r.TgZ(0,"div",0),r._uU(1),r.qZA(),r.TgZ(2,"div",1),r._uU(3,":"),r.qZA(),r.TgZ(4,"div",2),r._uU(5),r.qZA(),r.TgZ(6,"div",1),r._uU(7,":"),r.qZA(),r.TgZ(8,"div",3),r._uU(9),r.qZA()),2&t&&(r.xp6(1),r.hij(" ",n.hh," "),r.xp6(4),r.hij(" ",n.mm,""),r.xp6(4),r.Oqu(n.ss))},styles:["[_nghost-%COMP%]{display:flex}.dial[_ngcontent-%COMP%]{flex:1 1 auto;display:flex;flex-direction:column;justify-content:center;text-align:center}"]}),t})();function x(t,n){if(1&t&&r._UZ(0,"app-count-down-dial-view",8),2&t){const t=r.oxw();r.Q6J("hh",t.hh)("mm",t.mm)("ss",t.ss)}}function T(t,n){if(1&t){const t=r.EpF();r.TgZ(0,"button",9),r.NdJ("click",function(){return r.CHM(t),r.oxw().onEdit()}),r.TgZ(1,"mat-icon",7),r._uU(2,"edit"),r.qZA(),r.qZA()}2&t&&(r.xp6(1),r.Q6J("inline",!0))}function Z(t,n){if(1&t){const t=r.EpF();r.TgZ(0,"button",10),r.NdJ("click",function(){return r.CHM(t),r.oxw().onEditComplete()}),r.TgZ(1,"mat-icon",7),r._uU(2,"done"),r.qZA(),r.qZA()}2&t&&(r.xp6(1),r.Q6J("inline",!0))}let y=(()=>{class t{constructor(t){this.cdr=t,this._onDestroy$=new d.xQ,this.deleteClicked=new r.vpe,this.completed=new r.vpe}ngOnInit(){}ngOnChanges(t){if(t.countDownData){const n=t.countDownData.currentValue;n&&this.setTimer(n.timerFullDuration)}if(t.passedSeconds$){this.subscription&&this.subscription.unsubscribe();const n=t.passedSeconds$.currentValue;n&&(this.subscription=n.pipe((0,p.R)(this._onDestroy$),(0,p.R)(this.completed)).subscribe(t=>{const n=this.countDownData.timerFullDuration-t;this.setTimer(n),this.cdr.markForCheck(),n<=0&&this.completed.emit()}))}}ngOnDestroy(){u.l.onComponentDestroyed(this._onDestroy$)}reset(){this.setTimer(this.countDownData.timerFullDuration)}setTimer(t){t<0||(this.ss=t%60,t=Math.round(t/60),this.mm=t%60,t=Math.round(t/60),this.hh=t)}onEdit(){this.isInEditMode=!0}onEditComplete(){this.isInEditMode=!1}}return t.\u0275fac=function(n){return new(n||t)(r.Y36(r.sBO))},t.\u0275cmp=r.Xpm({type:t,selectors:[["app-count-down-timer"]],inputs:{countDownData:"countDownData",passedSeconds$:"passedSeconds$"},outputs:{deleteClicked:"deleteClicked",completed:"completed"},features:[r.TTD],decls:12,vars:4,consts:[[1,"timer"],[3,"hh","mm","ss",4,"ngIf"],[1,"controls-group"],[1,"button-container"],["mat-flat-button","","color","primary","class","controls","aria-label","Edit the time",3,"click",4,"ngIf"],["mat-flat-button","","color","accent","class","controls","aria-label","Finish editing the time",3,"click",4,"ngIf"],["mat-flat-button","","color","warn","aria-label","Delete the countdown",1,"controls",3,"click"],[3,"inline"],[3,"hh","mm","ss"],["mat-flat-button","","color","primary","aria-label","Edit the time",1,"controls",3,"click"],["mat-flat-button","","color","accent","aria-label","Finish editing the time",1,"controls",3,"click"]],template:function(t,n){1&t&&(r.TgZ(0,"div",0),r.YNc(1,x,1,3,"app-count-down-dial-view",1),r.TgZ(2,"div",2),r.TgZ(3,"div",3),r.YNc(4,T,3,1,"button",4),r.YNc(5,Z,3,1,"button",5),r.TgZ(6,"button",6),r.NdJ("click",function(){return n.deleteClicked.emit()}),r.TgZ(7,"mat-icon",7),r._uU(8,"delete"),r.qZA(),r.qZA(),r.qZA(),r.TgZ(9,"div",3),r.TgZ(10,"mat-icon"),r._uU(11,"reorder"),r.qZA(),r.qZA(),r.qZA(),r.qZA()),2&t&&(r.xp6(1),r.Q6J("ngIf",!n.isInEditMode),r.xp6(3),r.Q6J("ngIf",!n.isInEditMode),r.xp6(1),r.Q6J("ngIf",n.isInEditMode),r.xp6(2),r.Q6J("inline",!0))},directives:[s.O5,o.lW,i.Hw,w],styles:[".timer[_ngcontent-%COMP%]{display:flex;box-shadow:0 0 8px 2px #888;border-radius:9px;padding:4px}.timer[_ngcontent-%COMP%]   app-count-down-dial[_ngcontent-%COMP%]{flex:1 1 auto;margin:0}.controls-group[_ngcontent-%COMP%]{display:flex;margin-left:5px}.button-container[_ngcontent-%COMP%]{display:flex;margin-left:4px;flex-direction:column;justify-content:center}.button-container[_ngcontent-%COMP%]   .controls[_ngcontent-%COMP%]{margin:2px;flex:1 1 auto}.controls[_ngcontent-%COMP%]{min-width:20px;padding:0 10px;line-height:20px}app-count-down-dial-view[_ngcontent-%COMP%]{flex:1 1 auto}"]}),t})();var b=e(2541),C=e(2178);function D(t,n){if(1&t){const t=r.EpF();r.TgZ(0,"app-count-down-timer",5),r.NdJ("deleteClicked",function(){const n=r.CHM(t).$implicit;return r.oxw().onDeleteClicked(n.id)})("completed",function(){const n=r.CHM(t),e=n.$implicit,i=n.index;return r.oxw().onTimerCompleted(e.id,i)}),r.qZA()}if(2&t){const t=n.$implicit,e=n.index,i=r.oxw();r.Q6J("countDownData",t)("passedSeconds$",i.runIndividually&&i.runningIndex!=e?null:i.passedSeconds$)}}let v=(()=>{class t{constructor(t,n){this.cdr=n,this.destroy$=new d.xQ,this.onReset$=new d.xQ,this.nextId=0,this.isPlaying=!1,this.passedTime=0,this.runIndividually=!0,this.sort=!1,this.replay=!0,this.countdownTimers=[],this.passedSecondsSubject=new d.xQ,this.runningIndex=0,this.tickPerSecond$=t.getSeconds$().pipe((0,p.R)(this.destroy$),(0,m.U)(t=>Math.ceil(t/1e3)),(0,h.x)())}get passedSeconds$(){return this.passedSecondsSubject.pipe((0,g.B)())}ngOnInit(){this.countdownTimers=this.countdownTimers.concat(this.createNewTimerData()).concat(this.createNewTimerData()).concat(this.createNewTimerData())}ngOnDestroy(){this.passedSecondsSubject.complete(),u.l.onComponentDestroyed(this.destroy$)}onAddGroup(){this.countdownTimers=this.countdownTimers.concat(this.createNewTimerData()),this.sort&&(this.countdownTimers=this.countdownTimers.sort((t,n)=>t.timerFullDuration-n.timerFullDuration))}onDeleteClicked(t){this.countdownTimers=this.countdownTimers.filter(n=>n.id!==t)}trackTimerFn(t,n){return n.id}togglePlay(){if(this.isPlaying=!this.isPlaying,this.isPlaying){const t=this.onReset$.pipe((0,f.O)(void 0));this.subscription=(0,l.aj)([this.tickPerSecond$,t]).subscribe(()=>this.passedSecondsSubject.next(this.passedTime++))}else this.subscription&&this.subscription.unsubscribe()}createNewTimerData(){return new a(this.nextId++,Math.round(10*Math.random())+1)}onTimerCompleted(t,n){if(this.runIndividually){if(this.passedTime=1,this.runningIndex++,this.runningIndex>=this.countdownTimers.length){if(!this.replay)return;this.reset()}this.cdr.detectChanges(),this.onReset$.next()}}reset(){this.passedTime=0,this.runningIndex=0,this.childTimerComponents.forEach(t=>t.reset()),this.cdr.detectChanges(),this.onReset$.next()}}return t.\u0275fac=function(n){return new(n||t)(r.Y36(b.u),r.Y36(r.sBO))},t.\u0275cmp=r.Xpm({type:t,selectors:[["app-count-down-group"]],viewQuery:function(t,n){if(1&t&&r.Gf(y,5),2&t){let t;r.iGM(t=r.CRH())&&(n.childTimerComponents=t)}},inputs:{runIndividually:"runIndividually",sort:"sort",replay:"replay"},decls:13,vars:3,consts:[[1,"container"],["mode","determinate","value","40"],[1,"controls"],["mat-fab","","color","primary","aria-label","add new timer to the group",1,"group-item",3,"click"],["class","group-item",3,"countDownData","passedSeconds$","deleteClicked","completed",4,"ngFor","ngForOf","ngForTrackBy"],[1,"group-item",3,"countDownData","passedSeconds$","deleteClicked","completed"]],template:function(t,n){1&t&&(r.TgZ(0,"div",0),r._UZ(1,"mat-progress-bar",1),r.TgZ(2,"div",2),r.TgZ(3,"button",3),r.NdJ("click",function(){return n.onAddGroup()}),r.TgZ(4,"mat-icon"),r._uU(5,"add"),r.qZA(),r.qZA(),r.TgZ(6,"button",3),r.NdJ("click",function(){return n.togglePlay()}),r.TgZ(7,"mat-icon"),r._uU(8),r.qZA(),r.qZA(),r.TgZ(9,"button",3),r.NdJ("click",function(){return n.reset()}),r.TgZ(10,"mat-icon"),r._uU(11,"refresh"),r.qZA(),r.qZA(),r.qZA(),r.YNc(12,D,1,2,"app-count-down-timer",4),r.qZA()),2&t&&(r.xp6(8),r.Oqu(n.isPlaying?"pause":"play_arrow"),r.xp6(4),r.Q6J("ngForOf",n.countdownTimers)("ngForTrackBy",n.trackTimerFn))},directives:[C.pW,o.lW,i.Hw,s.sg,y],styles:[".container[_ngcontent-%COMP%]{display:flex;flex-direction:column;flex-wrap:wrap;padding:5px;border:1px solid rgba(39,35,35,.726)}.container[_ngcontent-%COMP%]   .group-item[_ngcontent-%COMP%]{flex:1 1 auto;margin:5px}"]}),t})();const _=[{path:"",component:(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=r.Xpm({type:t,selectors:[["app-countdown"]],decls:4,vars:0,consts:[[1,"countdown"]],template:function(t,n){1&t&&(r.TgZ(0,"div"),r.TgZ(1,"div",0),r._UZ(2,"app-count-down-group"),r._UZ(3,"app-count-down-group"),r.qZA(),r.qZA())},directives:[v],styles:["app-count-down-group[_ngcontent-%COMP%]{flex:1 1 auto;margin:16px}.countdown[_ngcontent-%COMP%]{display:flex;flex-direction:row}"]}),t})()}];let k=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({imports:[[c.Bz.forChild(_)],c.Bz]}),t})(),M=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({imports:[[s.ez,k,o.ot,i.Ps,C.Cv]]}),t})()}}]);