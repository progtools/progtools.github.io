"use strict";(self.webpackChunkprog_tools=self.webpackChunkprog_tools||[]).push([[592],{712:(k,v,h)=>{h.d(v,{K:()=>A});var x=h(9808),e=h(7423),f=h(5e3);let A=(()=>{class l{}return l.\u0275fac=function(O){return new(O||l)},l.\u0275mod=f.oAB({type:l}),l.\u0275inj=f.cJS({imports:[x.ez,e.ot]}),l})()},4273:(k,v,h)=>{h.d(v,{d:()=>K});var x=h(8929),e=h(5e3),f=h(3489),A=h(353);const l={leading:!0,trailing:!1};class n{constructor(s,o,i,c){this.duration=s,this.scheduler=o,this.leading=i,this.trailing=c}call(s,o){return o.subscribe(new d(s,this.duration,this.scheduler,this.leading,this.trailing))}}class d extends f.L{constructor(s,o,i,c,p){super(s),this.duration=o,this.scheduler=i,this.leading=c,this.trailing=p,this._hasTrailingValue=!1,this._trailingValue=null}_next(s){this.throttled?this.trailing&&(this._trailingValue=s,this._hasTrailingValue=!0):(this.add(this.throttled=this.scheduler.schedule(a,this.duration,{subscriber:this})),this.leading?this.destination.next(s):this.trailing&&(this._trailingValue=s,this._hasTrailingValue=!0))}_complete(){this._hasTrailingValue?(this.destination.next(this._trailingValue),this.destination.complete()):this.destination.complete()}clearThrottle(){const s=this.throttled;s&&(this.trailing&&this._hasTrailingValue&&(this.destination.next(this._trailingValue),this._trailingValue=null,this._hasTrailingValue=!1),s.unsubscribe(),this.remove(s),this.throttled=null)}}function a(C){const{subscriber:s}=C;s.clearThrottle()}var m=h(7625),g=h(9808);const F=["imageContainer"],T=["cropRect"],M=["image"],V=["canvas"],Z=function(C,s,o,i){return{top:C,bottom:s,left:o,right:i}};let K=(()=>{class C{constructor(o){this.cdr=o,this.croppedImage=new e.vpe,this.isCropping=new e.vpe,this.topOffset="10px",this.bottomOffset="10px",this.leftOffset="10px",this.rightOffset="10px",this.onDestroyed$=new x.xQ,this.borderDragged$=new x.xQ}ngOnInit(){this.borderDragged$.pipe(function u(C,s=A.P,o=l){return i=>i.lift(new n(C,s,o.leading,o.trailing))}(100),(0,m.R)(this.onDestroyed$)).subscribe(({event:{viewPortX:o,viewPortY:i},border:c})=>{const p=this.imgContainerElement.nativeElement.getBoundingClientRect(),w=o-p.x,B=i-p.y;switch(c){case"left":this.leftOffset=w>=0?w+"px":this.leftOffset;break;case"right":const I=p.width-w;this.rightOffset=I>=0?I+"px":this.rightOffset;break;case"top":this.topOffset=B>=0?B+"px":this.topOffset;break;case"bottom":const P=p.height-B;this.bottomOffset=P>=0?P+"px":this.bottomOffset}this.cdr.detectChanges()})}ngOnChanges(o){this.leftOffset=this.topOffset=this.rightOffset=this.bottomOffset="10px"}ngOnDestroy(){this.onDestroyed$.next(),this.onDestroyed$.complete()}onDragStart(o,i){this.currentlyDragging=o;const c=new Image;c.src="data:image/gif;base64,R0lGODlhAQABAIAAAAUEBAAAACwAAAAAAQABAAACAkQBADs=",i.dataTransfer.setDragImage(c,0,0)}onDragOver(o){this.borderDragged$.next({event:{viewPortX:o.clientX,viewPortY:o.clientY},border:this.currentlyDragging})}onTouchDrag(o,i){i.preventDefault();const c=i.touches[0];this.borderDragged$.next({event:{viewPortX:c.clientX,viewPortY:c.clientY},border:o})}cropImage(){const o=this.imageElement.nativeElement,i=this.cropRectElement.nativeElement.getBoundingClientRect(),c=this.imgContainerElement.nativeElement.getBoundingClientRect(),p=o.naturalWidth/c.width,w=o.naturalHeight/c.height,B=(i.left-c.left)*p,I=(i.top-c.top)*w,P=i.width*p,L=i.height*w;this.isCropping.emit(!0);const S=this.canvasElement.nativeElement;S.width=P,S.height=L,S.getContext("2d").drawImage(o,B,I,P,L,0,0,P,L),S.toBlob(G=>{const R=new FileReader;R.readAsDataURL(G),R.onloadend=()=>{this.croppedImage.emit(R.result),this.isCropping.emit(!1)}})}}return C.\u0275fac=function(o){return new(o||C)(e.Y36(e.sBO))},C.\u0275cmp=e.Xpm({type:C,selectors:[["app-image-crop"]],viewQuery:function(o,i){if(1&o&&(e.Gf(F,5),e.Gf(T,5),e.Gf(M,5),e.Gf(V,5)),2&o){let c;e.iGM(c=e.CRH())&&(i.imgContainerElement=c.first),e.iGM(c=e.CRH())&&(i.cropRectElement=c.first),e.iGM(c=e.CRH())&&(i.imageElement=c.first),e.iGM(c=e.CRH())&&(i.canvasElement=c.first)}},inputs:{imageData:"imageData"},outputs:{croppedImage:"croppedImage",isCropping:"isCropping"},features:[e.TTD],decls:18,vars:7,consts:[[1,"crop-container"],[1,"image-container",3,"dragover"],["imageContainer",""],[3,"src"],["image",""],[1,"crop-rect",3,"ngStyle"],["cropRect",""],["draggable","true",1,"crop-rect-right",3,"dragstart","touchmove"],[1,"circle"],["draggable","true",1,"crop-rect-left",3,"dragstart","touchmove"],["draggable","true",1,"crop-rect-bottom",3,"dragstart","touchmove"],["draggable","true",1,"crop-rect-top",3,"dragstart","touchmove"],[2,"display","none"],["canvas",""]],template:function(o,i){1&o&&(e.TgZ(0,"div")(1,"div",0)(2,"div",1,2),e.NdJ("dragover",function(p){return i.onDragOver(p)}),e._UZ(4,"img",3,4),e.TgZ(6,"div",5,6)(8,"div",7),e.NdJ("dragstart",function(p){return i.onDragStart("right",p)})("touchmove",function(p){return i.onTouchDrag("right",p)}),e._UZ(9,"div",8),e.qZA(),e.TgZ(10,"div",9),e.NdJ("dragstart",function(p){return i.onDragStart("left",p)})("touchmove",function(p){return i.onTouchDrag("left",p)}),e._UZ(11,"div",8),e.qZA(),e.TgZ(12,"div",10),e.NdJ("dragstart",function(p){return i.onDragStart("bottom",p)})("touchmove",function(p){return i.onTouchDrag("bottom",p)}),e._UZ(13,"div",8),e.qZA(),e.TgZ(14,"div",11),e.NdJ("dragstart",function(p){return i.onDragStart("top",p)})("touchmove",function(p){return i.onTouchDrag("top",p)}),e._UZ(15,"div",8),e.qZA()()()(),e._UZ(16,"canvas",12,13),e.qZA()),2&o&&(e.xp6(4),e.Q6J("src",i.imageData,e.LSH),e.xp6(2),e.Q6J("ngStyle",e.l5B(2,Z,i.topOffset,i.bottomOffset,i.leftOffset,i.rightOffset)))},dependencies:[g.PC],styles:[".crop-container[_ngcontent-%COMP%]{text-align:center}.image-container[_ngcontent-%COMP%]{margin:auto;display:inline-block;position:relative}.image-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;max-height:calc(100vh - 30px);-o-object-fit:scale-down;object-fit:scale-down}.image-container[_ngcontent-%COMP%]   .crop-rect[_ngcontent-%COMP%]{position:absolute}.image-container[_ngcontent-%COMP%]   .crop-rect-left[_ngcontent-%COMP%], .image-container[_ngcontent-%COMP%]   .crop-rect-right[_ngcontent-%COMP%], .image-container[_ngcontent-%COMP%]   .crop-rect-top[_ngcontent-%COMP%], .image-container[_ngcontent-%COMP%]   .crop-rect-bottom[_ngcontent-%COMP%]{position:absolute;background-color:red}.image-container[_ngcontent-%COMP%]   .crop-rect-left[_ngcontent-%COMP%]{left:0;height:100%;width:2px;cursor:ew-resize}.image-container[_ngcontent-%COMP%]   .crop-rect-right[_ngcontent-%COMP%]{right:0;height:100%;width:2px;cursor:ew-resize}.image-container[_ngcontent-%COMP%]   .crop-rect-top[_ngcontent-%COMP%]{top:0;width:100%;height:2px;cursor:ns-resize}.image-container[_ngcontent-%COMP%]   .crop-rect-bottom[_ngcontent-%COMP%]{bottom:0;width:100%;height:2px;cursor:ns-resize}.image-container[_ngcontent-%COMP%]   .crop-rect[_ngcontent-%COMP%]   .circle[_ngcontent-%COMP%]{border-radius:10px;background-color:red;width:20px;height:20px;position:absolute}.image-container[_ngcontent-%COMP%]   .crop-rect-left[_ngcontent-%COMP%]   .circle[_ngcontent-%COMP%], .image-container[_ngcontent-%COMP%]   .crop-rect-right[_ngcontent-%COMP%]   .circle[_ngcontent-%COMP%]{top:calc(50% - 10px);left:-10px}.image-container[_ngcontent-%COMP%]   .crop-rect-top[_ngcontent-%COMP%]   .circle[_ngcontent-%COMP%], .image-container[_ngcontent-%COMP%]   .crop-rect-bottom[_ngcontent-%COMP%]   .circle[_ngcontent-%COMP%]{left:calc(50% - 10px);top:-10px}"],changeDetection:0}),C})()},5310:(k,v,h)=>{h.d(v,{i:()=>e});var x=h(6498);class e{static convertFileToImageBase64(A){return new x.y(l=>{const y=new FileReader;y.onloadend=O=>{l.next({imageData:O.target.result}),l.complete()},y.onerror=()=>l.error(),y.readAsDataURL(A)})}}},9156:(k,v,h)=>{h.d(v,{T:()=>u,s:()=>_});const x=["J","Z","I","H","G","F","E","D","C","B","A"],e=["X","W","U","T","R","Q","P","N","M","L","K"];var f=(()=>{return(n=f||(f={}))[n.before1968=0]="before1968",n[n.between1968_1999=1]="between1968_1999",n[n.after2000=2]="after2000",f;var n})();const A=[2,7,6,5,4,3,2];function l(n,d){return n=Math.ceil(n),d=Math.floor(d),Math.floor(Math.random()*(d-n+1))+n}function y(n,d){let a=0;for(let g=0;g<7;g++)a+=d[g]*A[g];switch(n){case"T":case"G":a+=4}const m=Math.floor(a%11);switch(n){case"S":case"T":return x[m];case"F":case"G":return e[m]}return" "}function _(n,d){const a=function O(n){return n<1968?f.before1968:n<=1999?f.between1968_1999:f.after2000}(d);let m;const g=[];switch(n){case"S":case"T":switch(a){case f.before1968:m="S",g.push(l(0,1));break;case f.between1968_1999:6===(m="S",g.push(l(6,9)),g[0])?g.push(l(8,9)):g.push(l(0,9));break;case f.after2000:m="T";const M=l(0,d%100);g.push(Math.floor(M/10)),g.push(M%10)}break;case"F":case"G":switch(a){case f.before1968:m="F",g.push(l(0,1));break;case f.between1968_1999:6===(m="F",g.push(l(6,9)),g[0])?g.push(l(8,9)):g.push(l(0,9));break;case f.after2000:m="G";const M=l(0,d%100);g.push(Math.floor(M/10)),g.push(M%10)}}for(let T=g.length;T<7;T++)g.push(l(0,9));const F=y(m,g);return[m,...g,F].join("")}function u(n){if("S"!==(n=n.toUpperCase()).charAt(0)&&"T"!==n.charAt(0)&&"F"!==n.charAt(0)&&"G"!==n.charAt(0)||!n.match("[S,T,F,G](\\d){7}\\w"))return!1;const d=n.substr(1,7).split("").map(m=>+m),a=y(n.charAt(0),d);return n.charAt(8)===a}},2541:(k,v,h)=>{h.d(v,{u:()=>_});var x=h(4850),e=h(5778),f=h(2536),A=h(4327),l=h(8723),y=h(839),O=h(5e3);let _=(()=>{class u{constructor(){this.secondsTickers$=(0,l.H)(0,150).pipe((0,x.U)(()=>Date.now()),(0,e.x)((d,a)=>Math.trunc(a/1e3)===Math.trunc(d/1e3)),(0,f.O)(()=>new y.t(1)),(0,A.x)())}getSeconds$(){return this.secondsTickers$}}return u.\u0275fac=function(d){return new(d||u)},u.\u0275prov=O.Yz7({token:u,factory:u.\u0275fac,providedIn:"root"}),u})()},9287:(k,v,h)=>{h.d(v,{Iq:()=>O,TU:()=>A});var x=h(9808),e=h(5e3);class f{constructor(u,n){this._document=n;const d=this._textarea=this._document.createElement("textarea"),a=d.style;a.position="fixed",a.top=a.opacity="0",a.left="-999em",d.setAttribute("aria-hidden","true"),d.value=u,d.readOnly=!0,this._document.body.appendChild(d)}copy(){const u=this._textarea;let n=!1;try{if(u){const d=this._document.activeElement;u.select(),u.setSelectionRange(0,u.value.length),n=this._document.execCommand("copy"),d&&d.focus()}}catch(d){}return n}destroy(){const u=this._textarea;u&&(u.remove(),this._textarea=void 0)}}let A=(()=>{class _{constructor(n){this._document=n}copy(n){const d=this.beginCopy(n),a=d.copy();return d.destroy(),a}beginCopy(n){return new f(n,this._document)}}return _.\u0275fac=function(n){return new(n||_)(e.LFG(x.K0))},_.\u0275prov=e.Yz7({token:_,factory:_.\u0275fac,providedIn:"root"}),_})(),O=(()=>{class _{}return _.\u0275fac=function(n){return new(n||_)},_.\u0275mod=e.oAB({type:_}),_.\u0275inj=e.cJS({}),_})()},8231:(k,v,h)=>{h.d(v,{DS:()=>Q});const f="function"==typeof atob,A="function"==typeof btoa,l="function"==typeof Buffer,y="function"==typeof TextDecoder?new TextDecoder:void 0,O="function"==typeof TextEncoder?new TextEncoder:void 0,u=Array.prototype.slice.call("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="),n=(t=>{let r={};return t.forEach((b,D)=>r[b]=D),r})(u),d=/^(?:[A-Za-z\d+\/]{4})*?(?:[A-Za-z\d+\/]{2}(?:==)?|[A-Za-z\d+\/]{3}=?)?$/,a=String.fromCharCode.bind(String),m="function"==typeof Uint8Array.from?Uint8Array.from.bind(Uint8Array):(t,r=(b=>b))=>new Uint8Array(Array.prototype.slice.call(t,0).map(r)),g=t=>t.replace(/=/g,"").replace(/[+\/]/g,r=>"+"==r?"-":"_"),F=t=>t.replace(/[^A-Za-z0-9\+\/]/g,""),T=t=>{let r,b,D,U,E="";const W=t.length%3;for(let j=0;j<t.length;){if((b=t.charCodeAt(j++))>255||(D=t.charCodeAt(j++))>255||(U=t.charCodeAt(j++))>255)throw new TypeError("invalid character found");r=b<<16|D<<8|U,E+=u[r>>18&63]+u[r>>12&63]+u[r>>6&63]+u[63&r]}return W?E.slice(0,W-3)+"===".substring(W):E},M=A?t=>btoa(t):l?t=>Buffer.from(t,"binary").toString("base64"):T,V=l?t=>Buffer.from(t).toString("base64"):t=>{let b=[];for(let D=0,U=t.length;D<U;D+=4096)b.push(a.apply(null,t.subarray(D,D+4096)));return M(b.join(""))},Z=(t,r=!1)=>r?g(V(t)):V(t),K=t=>{if(t.length<2)return(r=t.charCodeAt(0))<128?t:r<2048?a(192|r>>>6)+a(128|63&r):a(224|r>>>12&15)+a(128|r>>>6&63)+a(128|63&r);var r=65536+1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320);return a(240|r>>>18&7)+a(128|r>>>12&63)+a(128|r>>>6&63)+a(128|63&r)},C=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,s=t=>t.replace(C,K),o=l?t=>Buffer.from(t,"utf8").toString("base64"):O?t=>V(O.encode(t)):t=>M(s(t)),i=(t,r=!1)=>r?g(o(t)):o(t),c=t=>i(t,!0),p=/[\xC0-\xDF][\x80-\xBF]|[\xE0-\xEF][\x80-\xBF]{2}|[\xF0-\xF7][\x80-\xBF]{3}/g,w=t=>{switch(t.length){case 4:var b=((7&t.charCodeAt(0))<<18|(63&t.charCodeAt(1))<<12|(63&t.charCodeAt(2))<<6|63&t.charCodeAt(3))-65536;return a(55296+(b>>>10))+a(56320+(1023&b));case 3:return a((15&t.charCodeAt(0))<<12|(63&t.charCodeAt(1))<<6|63&t.charCodeAt(2));default:return a((31&t.charCodeAt(0))<<6|63&t.charCodeAt(1))}},B=t=>t.replace(p,w),I=t=>{if(t=t.replace(/\s+/g,""),!d.test(t))throw new TypeError("malformed base64.");t+="==".slice(2-(3&t.length));let r,D,U,b="";for(let E=0;E<t.length;)r=n[t.charAt(E++)]<<18|n[t.charAt(E++)]<<12|(D=n[t.charAt(E++)])<<6|(U=n[t.charAt(E++)]),b+=64===D?a(r>>16&255):64===U?a(r>>16&255,r>>8&255):a(r>>16&255,r>>8&255,255&r);return b},P=f?t=>atob(F(t)):l?t=>Buffer.from(t,"base64").toString("binary"):I,L=l?t=>m(Buffer.from(t,"base64")):t=>m(P(t),r=>r.charCodeAt(0)),S=t=>L(G(t)),z=l?t=>Buffer.from(t,"base64").toString("utf8"):y?t=>y.decode(L(t)):t=>B(P(t)),G=t=>F(t.replace(/[-_]/g,r=>"-"==r?"+":"/")),R=t=>z(G(t)),H=t=>({value:t,enumerable:!1,writable:!0,configurable:!0}),$=function(){const t=(r,b)=>Object.defineProperty(String.prototype,r,H(b));t("fromBase64",function(){return R(this)}),t("toBase64",function(r){return i(this,r)}),t("toBase64URI",function(){return i(this,!0)}),t("toBase64URL",function(){return i(this,!0)}),t("toUint8Array",function(){return S(this)})},J=function(){const t=(r,b)=>Object.defineProperty(Uint8Array.prototype,r,H(b));t("toBase64",function(r){return Z(this,r)}),t("toBase64URI",function(){return Z(this,!0)}),t("toBase64URL",function(){return Z(this,!0)})},Q={version:"3.7.2",VERSION:"3.7.2",atob:P,atobPolyfill:I,btoa:M,btoaPolyfill:T,fromBase64:R,toBase64:i,encode:i,encodeURI:c,encodeURL:c,utob:s,btou:B,decode:R,isValid:t=>{if("string"!=typeof t)return!1;const r=t.replace(/\s+/g,"").replace(/={0,2}$/,"");return!/[^\s0-9a-zA-Z\+/]/.test(r)||!/[^\s0-9a-zA-Z\-_]/.test(r)},fromUint8Array:Z,toUint8Array:S,extendString:$,extendUint8Array:J,extendBuiltins:()=>{$(),J()}}}}]);