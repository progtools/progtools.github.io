{"version":3,"file":"default-src_app_common_components_components_module_ts-src_app_common_utils_ImageFileReader_ts.js","mappings":";;;;;;;;;;;;;;;AAAiG;AAC1F,MAAMG,qBAAqB,GAAG;EACjCC,OAAO,EAAE,IAAI;EACbC,QAAQ,EAAE;AACd,CAAC;AACM,SAASC,QAAQA,CAACC,gBAAgB,EAAEC,MAAM,GAAGL,qBAAqB,EAAE;EACvE,OAAQM,MAAM,IAAKA,MAAM,CAACC,IAAI,CAAC,IAAIC,gBAAgB,CAACJ,gBAAgB,EAAE,CAAC,CAACC,MAAM,CAACJ,OAAO,EAAE,CAAC,CAACI,MAAM,CAACH,QAAQ,CAAC,CAAC;AAC/G;AACA,MAAMM,gBAAgB,CAAC;EACnBC,WAAWA,CAACL,gBAAgB,EAAEH,OAAO,EAAEC,QAAQ,EAAE;IAC7C,IAAI,CAACE,gBAAgB,GAAGA,gBAAgB;IACxC,IAAI,CAACH,OAAO,GAAGA,OAAO;IACtB,IAAI,CAACC,QAAQ,GAAGA,QAAQ;EAC5B;EACAQ,IAAIA,CAACC,UAAU,EAAEL,MAAM,EAAE;IACrB,OAAOA,MAAM,CAACM,SAAS,CAAC,IAAIC,kBAAkB,CAACF,UAAU,EAAE,IAAI,CAACP,gBAAgB,EAAE,IAAI,CAACH,OAAO,EAAE,IAAI,CAACC,QAAQ,CAAC,CAAC;EACnH;AACJ;AACA,MAAMW,kBAAkB,SAAShB,kEAAqB,CAAC;EACnDY,WAAWA,CAACK,WAAW,EAAEV,gBAAgB,EAAEW,QAAQ,EAAEC,SAAS,EAAE;IAC5D,KAAK,CAACF,WAAW,CAAC;IAClB,IAAI,CAACA,WAAW,GAAGA,WAAW;IAC9B,IAAI,CAACV,gBAAgB,GAAGA,gBAAgB;IACxC,IAAI,CAACW,QAAQ,GAAGA,QAAQ;IACxB,IAAI,CAACC,SAAS,GAAGA,SAAS;IAC1B,IAAI,CAACC,SAAS,GAAG,KAAK;EAC1B;EACAC,KAAKA,CAACC,KAAK,EAAE;IACT,IAAI,CAACF,SAAS,GAAG,IAAI;IACrB,IAAI,CAACG,UAAU,GAAGD,KAAK;IACvB,IAAI,CAAC,IAAI,CAACE,UAAU,EAAE;MAClB,IAAI,IAAI,CAACN,QAAQ,EAAE;QACf,IAAI,CAACO,IAAI,CAAC,CAAC;MACf,CAAC,MACI;QACD,IAAI,CAACnB,QAAQ,CAACgB,KAAK,CAAC;MACxB;IACJ;EACJ;EACAG,IAAIA,CAAA,EAAG;IACH,MAAM;MAAEL,SAAS;MAAEG;IAAW,CAAC,GAAG,IAAI;IACtC,IAAIH,SAAS,EAAE;MACX,IAAI,CAACH,WAAW,CAACS,IAAI,CAACH,UAAU,CAAC;MACjC,IAAI,CAACjB,QAAQ,CAACiB,UAAU,CAAC;IAC7B;IACA,IAAI,CAACH,SAAS,GAAG,KAAK;IACtB,IAAI,CAACG,UAAU,GAAGI,SAAS;EAC/B;EACArB,QAAQA,CAACgB,KAAK,EAAE;IACZ,MAAMM,QAAQ,GAAG,IAAI,CAACC,mBAAmB,CAACP,KAAK,CAAC;IAChD,IAAI,CAAC,CAACM,QAAQ,EAAE;MACZ,IAAI,CAACE,GAAG,CAAC,IAAI,CAACN,UAAU,GAAGvB,+DAAc,CAAC2B,QAAQ,EAAE,IAAI1B,kEAAqB,CAAC,IAAI,CAAC,CAAC,CAAC;IACzF;EACJ;EACA2B,mBAAmBA,CAACP,KAAK,EAAE;IACvB,IAAI;MACA,OAAO,IAAI,CAACf,gBAAgB,CAACe,KAAK,CAAC;IACvC,CAAC,CACD,OAAOS,GAAG,EAAE;MACR,IAAI,CAACd,WAAW,CAACe,KAAK,CAACD,GAAG,CAAC;MAC3B,OAAO,IAAI;IACf;EACJ;EACAE,cAAcA,CAAA,EAAG;IACb,MAAM;MAAET,UAAU;MAAEL;IAAU,CAAC,GAAG,IAAI;IACtC,IAAIK,UAAU,EAAE;MACZA,UAAU,CAACU,WAAW,CAAC,CAAC;IAC5B;IACA,IAAI,CAACV,UAAU,GAAGG,SAAS;IAC3B,IAAIR,SAAS,EAAE;MACX,IAAI,CAACM,IAAI,CAAC,CAAC;IACf;EACJ;EACAU,UAAUA,CAAA,EAAG;IACT,IAAI,CAACF,cAAc,CAAC,CAAC;EACzB;EACAG,cAAcA,CAAA,EAAG;IACb,IAAI,CAACH,cAAc,CAAC,CAAC;EACzB;AACJ;;;;;;;;;;;;;;;;;AC/E2C;AACA;AACQ;AAC5C,SAASM,YAAYA,CAACX,QAAQ,EAAEY,SAAS,GAAGF,mDAAK,EAAE9B,MAAM,GAAGL,4DAAqB,EAAE;EACtF,OAAQM,MAAM,IAAKA,MAAM,CAACC,IAAI,CAAC,IAAI+B,oBAAoB,CAACb,QAAQ,EAAEY,SAAS,EAAEhC,MAAM,CAACJ,OAAO,EAAEI,MAAM,CAACH,QAAQ,CAAC,CAAC;AAClH;AACA,MAAMoC,oBAAoB,CAAC;EACvB7B,WAAWA,CAACgB,QAAQ,EAAEY,SAAS,EAAEpC,OAAO,EAAEC,QAAQ,EAAE;IAChD,IAAI,CAACuB,QAAQ,GAAGA,QAAQ;IACxB,IAAI,CAACY,SAAS,GAAGA,SAAS;IAC1B,IAAI,CAACpC,OAAO,GAAGA,OAAO;IACtB,IAAI,CAACC,QAAQ,GAAGA,QAAQ;EAC5B;EACAQ,IAAIA,CAACC,UAAU,EAAEL,MAAM,EAAE;IACrB,OAAOA,MAAM,CAACM,SAAS,CAAC,IAAI2B,sBAAsB,CAAC5B,UAAU,EAAE,IAAI,CAACc,QAAQ,EAAE,IAAI,CAACY,SAAS,EAAE,IAAI,CAACpC,OAAO,EAAE,IAAI,CAACC,QAAQ,CAAC,CAAC;EAC/H;AACJ;AACA,MAAMqC,sBAAsB,SAASL,mDAAU,CAAC;EAC5CzB,WAAWA,CAACK,WAAW,EAAEW,QAAQ,EAAEY,SAAS,EAAEpC,OAAO,EAAEC,QAAQ,EAAE;IAC7D,KAAK,CAACY,WAAW,CAAC;IAClB,IAAI,CAACW,QAAQ,GAAGA,QAAQ;IACxB,IAAI,CAACY,SAAS,GAAGA,SAAS;IAC1B,IAAI,CAACpC,OAAO,GAAGA,OAAO;IACtB,IAAI,CAACC,QAAQ,GAAGA,QAAQ;IACxB,IAAI,CAACsC,iBAAiB,GAAG,KAAK;IAC9B,IAAI,CAACC,cAAc,GAAG,IAAI;EAC9B;EACAvB,KAAKA,CAACC,KAAK,EAAE;IACT,IAAI,IAAI,CAACuB,SAAS,EAAE;MAChB,IAAI,IAAI,CAACxC,QAAQ,EAAE;QACf,IAAI,CAACuC,cAAc,GAAGtB,KAAK;QAC3B,IAAI,CAACqB,iBAAiB,GAAG,IAAI;MACjC;IACJ,CAAC,MACI;MACD,IAAI,CAACb,GAAG,CAAC,IAAI,CAACe,SAAS,GAAG,IAAI,CAACL,SAAS,CAACM,QAAQ,CAACC,YAAY,EAAE,IAAI,CAACnB,QAAQ,EAAE;QAAEd,UAAU,EAAE;MAAK,CAAC,CAAC,CAAC;MACrG,IAAI,IAAI,CAACV,OAAO,EAAE;QACd,IAAI,CAACa,WAAW,CAACS,IAAI,CAACJ,KAAK,CAAC;MAChC,CAAC,MACI,IAAI,IAAI,CAACjB,QAAQ,EAAE;QACpB,IAAI,CAACuC,cAAc,GAAGtB,KAAK;QAC3B,IAAI,CAACqB,iBAAiB,GAAG,IAAI;MACjC;IACJ;EACJ;EACAK,SAASA,CAAA,EAAG;IACR,IAAI,IAAI,CAACL,iBAAiB,EAAE;MACxB,IAAI,CAAC1B,WAAW,CAACS,IAAI,CAAC,IAAI,CAACkB,cAAc,CAAC;MAC1C,IAAI,CAAC3B,WAAW,CAACgC,QAAQ,CAAC,CAAC;IAC/B,CAAC,MACI;MACD,IAAI,CAAChC,WAAW,CAACgC,QAAQ,CAAC,CAAC;IAC/B;EACJ;EACAC,aAAaA,CAAA,EAAG;IACZ,MAAML,SAAS,GAAG,IAAI,CAACA,SAAS;IAChC,IAAIA,SAAS,EAAE;MACX,IAAI,IAAI,CAACxC,QAAQ,IAAI,IAAI,CAACsC,iBAAiB,EAAE;QACzC,IAAI,CAAC1B,WAAW,CAACS,IAAI,CAAC,IAAI,CAACkB,cAAc,CAAC;QAC1C,IAAI,CAACA,cAAc,GAAG,IAAI;QAC1B,IAAI,CAACD,iBAAiB,GAAG,KAAK;MAClC;MACAE,SAAS,CAACX,WAAW,CAAC,CAAC;MACvB,IAAI,CAACiB,MAAM,CAACN,SAAS,CAAC;MACtB,IAAI,CAACA,SAAS,GAAG,IAAI;IACzB;EACJ;AACJ;AACA,SAASE,YAAYA,CAACK,GAAG,EAAE;EACvB,MAAM;IAAEtC;EAAW,CAAC,GAAGsC,GAAG;EAC1BtC,UAAU,CAACoC,aAAa,CAAC,CAAC;AAC9B;;;;;;;;;;;;;;;;;;ACvEuE;AAExB;AACY;;AAgBrD,MAAOM,gBAAgB;;;uCAAhBA,gBAAgB;IAAA;EAAA;;;YAAhBA;IAAgB;EAAA;;;gBAPzBF,yDAAY,EACZC,qEAAe;IAAA;EAAA;;;sHAMNC,gBAAgB;IAAAC,YAAA,GAVzBJ,gFAAkB;IAAAK,OAAA,GAGlBJ,yDAAY,EACZC,qEAAe;IAAAI,OAAA,GAGfN,gFAAkB;EAAA;AAAA;;;;;;;;;;;;;;;AChBwB;AAExC,MAAOQ,eAAe;EACnB,OAAOC,wBAAwBA,CAACC,OAAa;IAClD,OAAO,IAAIH,4CAAU,CAAEI,QAAyC,IAAG;MACjE,MAAMC,MAAM,GAAG,IAAIC,UAAU,EAAE;MAC/BD,MAAM,CAACE,SAAS,GAAGC,GAAG,IAAG;QACvBJ,QAAQ,CAACtC,IAAI,CAAC;UAAC2C,SAAS,EAAED,GAAG,CAACE,MAAM,CAACC;QAAgB,CAAC,CAAC;QACvDP,QAAQ,CAACf,QAAQ,EAAE;MACrB,CAAC;MACDgB,MAAM,CAACO,OAAO,GAAG,MAAMR,QAAQ,CAAChC,KAAK,EAAE;MACvCiC,MAAM,CAACQ,aAAa,CAACV,OAAO,CAAC;IAC/B,CAAC,CAAC;EACJ;;;;;;;;;;;;;;;;;;;;ACb6B;AAGuC;AACd;;;;;;;;;;;;;AAWlD,MAAOV,kBAAkB;EA0B7BzC,YAA6BiE,GAAsB;IAAtB,KAAAA,GAAG,GAAHA,GAAG;IAbtB,KAAAC,YAAY,GAAG,IAAIH,uDAAY,EAAU;IACzC,KAAAI,UAAU,GAAG,IAAIJ,uDAAY,EAAW;IAIlD,KAAAK,SAAS,GAAG,MAAM;IAClB,KAAAC,YAAY,GAAG,MAAM;IACrB,KAAAC,UAAU,GAAG,MAAM;IACnB,KAAAC,WAAW,GAAG,MAAM;IAEH,KAAAC,YAAY,GAAG,IAAIV,yCAAO,EAAQ;IAClC,KAAAW,cAAc,GAAG,IAAIX,yCAAO,EAAkE;EAExD;EAEvDY,QAAQA,CAAA;IACN,IAAI,CAACD,cAAc,CAClBE,IAAI,CACHhD,4DAAY,CAAC,GAAG,CAAC,EACjBqC,yDAAS,CAAC,IAAI,CAACQ,YAAY,CAAC,CAC7B,CACArE,SAAS,CAAC,CAAC;MAACyE,KAAK,EAAC;QAACC,SAAS,EAAEC,OAAO;QAAEC,SAAS,EAAEC;MAAO,CAAC;MAAEC;IAAM,CAAC,KAAI;MACtE,MAAMC,UAAU,GAAG,IAAI,CAACC,mBAAmB,CAACC,aAAa,CAACC,qBAAqB,EAAE;MACjF,MAAMC,IAAI,GAAGR,OAAO,GAAGI,UAAU,CAACK,CAAC;MACnC,MAAMC,GAAG,GAAGR,OAAO,GAAGE,UAAU,CAACO,CAAC;MAClC,QAAOR,MAAM;QACX,KAAK,MAAM;UACT,IAAI,CAACX,UAAU,GAAGgB,IAAI,IAAG,CAAC,GAAGA,IAAI,GAAG,IAAI,GAAG,IAAI,CAAChB,UAAU;UAC1D;QACF,KAAK,OAAO;UACV,MAAMoB,QAAQ,GAAGR,UAAU,CAACS,KAAK,GAAGL,IAAI;UACxC,IAAI,CAACf,WAAW,GAAGmB,QAAQ,IAAI,CAAC,GAAGA,QAAQ,GAAC,IAAI,GAAE,IAAI,CAACnB,WAAW;UAClE;QACF,KAAK,KAAK;UACR,IAAI,CAACH,SAAS,GAAGoB,GAAG,IAAG,CAAC,GAAGA,GAAG,GAAG,IAAI,GAAG,IAAI,CAACpB,SAAS;UACtD;QACF,KAAK,QAAQ;UACX,MAAMwB,SAAS,GAAGV,UAAU,CAACW,MAAM,GAAGL,GAAG;UACzC,IAAI,CAACnB,YAAY,GAAGuB,SAAS,IAAE,CAAC,GAAGA,SAAS,GAAE,IAAI,GAAG,IAAI,CAACvB,YAAY;UACtE;MACJ;MACA,IAAI,CAACJ,GAAG,CAAC6B,aAAa,EAAE;IAC1B,CAAC,CAAC;EACJ;EAEAC,WAAWA,CAACC,OAAsB;IAChC,IAAI,CAAC1B,UAAU,GAAG,IAAI,CAACF,SAAS,GAAG,IAAI,CAACG,WAAW,GAAG,IAAI,CAACF,YAAY,GAAG,MAAM;EAClF;EAEA4B,WAAWA,CAAA;IACT,IAAI,CAACzB,YAAY,CAAC1D,IAAI,EAAE;IACxB,IAAI,CAAC0D,YAAY,CAACnC,QAAQ,EAAE;EAC9B;EAEA6D,WAAWA,CAACjB,MAAc,EAAEL,KAAgB;IAC1C,IAAI,CAACuB,iBAAiB,GAAGlB,MAAM;IAC/B,MAAMmB,GAAG,GAAG,IAAIC,KAAK,EAAE;IACvBD,GAAG,CAACE,GAAG,GAAG,wEAAwE;IAClF1B,KAAK,CAAC2B,YAAY,CAACC,YAAY,CAACJ,GAAG,EAAE,CAAC,EAAE,CAAC,CAAC;EAC5C;EAEAK,UAAUA,CAAC7B,KAAgB;IACzB,IAAI,CAACH,cAAc,CAAC3D,IAAI,CAAC;MAAC8D,KAAK,EAAE;QAC/BC,SAAS,EAAED,KAAK,CAACE,OAAO;QACxBC,SAAS,EAAEH,KAAK,CAACI;OAClB;MACDC,MAAM,EAAE,IAAI,CAACkB;IAAiB,CAAC,CAAC;EAClC;EAEAO,WAAWA,CAACzB,MAAc,EAAEL,KAAiB;IAC3CA,KAAK,CAAC+B,cAAc,EAAE;IACtB,MAAMC,YAAY,GAAGhC,KAAK,CAACiC,OAAO,CAAC,CAAC,CAAC;IACrC,IAAI,CAACpC,cAAc,CAAC3D,IAAI,CAAC;MAAC8D,KAAK,EAAE;QAACC,SAAS,EAAE+B,YAAY,CAAC9B,OAAO;QAAEC,SAAS,EAAE6B,YAAY,CAAC5B;MAAO,CAAC;MAAEC;IAAM,CAAC,CAAC;EAC/G;EAEA6B,SAASA,CAAA;IACP,MAAMV,GAAG,GAAG,IAAI,CAACW,YAAY,CAAC3B,aAAa;IAC3C,MAAM4B,mBAAmB,GAAG,IAAI,CAACC,eAAe,CAAC7B,aAAa,CAACC,qBAAqB,EAAE;IACtF,MAAM6B,qBAAqB,GAAG,IAAI,CAAC/B,mBAAmB,CAACC,aAAa,CAACC,qBAAqB,EAAE;IAC5F,MAAM8B,QAAQ,GAAGf,GAAG,CAACgB,YAAY,GAAGF,qBAAqB,CAACvB,KAAK;IAC/D,MAAM0B,QAAQ,GAAGjB,GAAG,CAACkB,aAAa,GAAGJ,qBAAqB,CAACrB,MAAM;IAEjE,MAAM0B,OAAO,GAAG,CAACP,mBAAmB,CAAC1B,IAAI,GAAG4B,qBAAqB,CAAC5B,IAAI,IAAI6B,QAAQ;IAClF,MAAMK,OAAO,GAAG,CAACR,mBAAmB,CAACxB,GAAG,GAAG0B,qBAAqB,CAAC1B,GAAG,IAAI6B,QAAQ;IAChF,MAAMI,cAAc,GAAGT,mBAAmB,CAACrB,KAAK,GAAGwB,QAAQ;IAC3D,MAAMO,eAAe,GAAGV,mBAAmB,CAACnB,MAAM,GAAGwB,QAAQ;IAE7D,IAAI,CAAClD,UAAU,CAACwD,IAAI,CAAC,IAAI,CAAC;IAC1B,MAAMC,MAAM,GAAG,IAAI,CAACC,aAAa,CAACzC,aAAa;IAC/CwC,MAAM,CAACjC,KAAK,GAAG8B,cAAc;IAC7BG,MAAM,CAAC/B,MAAM,GAAG6B,eAAe;IAC/B,MAAMI,OAAO,GAAGF,MAAM,CAACG,UAAU,CAAC,IAAI,CAAC;IAEvCD,OAAO,CAACE,SAAS,CAAC5B,GAAG,EAAEmB,OAAO,EAAEC,OAAO,EAAEC,cAAc,EAAEC,eAAe,EAAE,CAAC,EAAE,CAAC,EAAED,cAAc,EAAEC,eAAe,CAAC;IAEhHE,MAAM,CAACK,MAAM,CAAEC,IAAI,IAAI;MACrB,MAAM7E,MAAM,GAAG,IAAIC,UAAU,EAAE;MAC/BD,MAAM,CAACQ,aAAa,CAACqE,IAAI,CAAC;MAC1B7E,MAAM,CAACE,SAAS,GAAG,MAAK;QACpB,MAAM4E,UAAU,GAAG9E,MAAM,CAACM,MAAgB;QAC1C,IAAI,CAACO,YAAY,CAACyD,IAAI,CAACQ,UAAU,CAAC;QAClC,IAAI,CAAChE,UAAU,CAACwD,IAAI,CAAC,KAAK,CAAC;MAC/B,CAAC;IACH,CAAC,CAAC;EACJ;;;uCArHWlF,kBAAkB,EAAA2F,+DAAA,CAAAA,4DAAA;IAAA;EAAA;;;YAAlB3F,kBAAkB;MAAA8F,SAAA;MAAAC,SAAA,WAAAC,yBAAAC,EAAA,EAAAC,GAAA;QAAA,IAAAD,EAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;UCb3BN,4DAFJ,UAAK,aACyB,gBAGQ;UAAhCA,wDAAA,sBAAAU,oDAAAC,MAAA;YAAAX,2DAAA,CAAAa,GAAA;YAAA,OAAAb,yDAAA,CAAYO,GAAA,CAAAlC,UAAA,CAAAsC,MAAA,CAAkB;UAAA,EAAC;UAC7BX,uDAAA,gBAA8B;UAW5BA,4DATF,gBAQC,aACqI;UAA3CA,wDAA3C,uBAAAgB,qDAAAL,MAAA;YAAAX,2DAAA,CAAAa,GAAA;YAAA,OAAAb,yDAAA,CAAaO,GAAA,CAAAzC,WAAA,CAAY,OAAO,EAAA6C,MAAA,CAAS;UAAA,EAAC,uBAAAM,qDAAAN,MAAA;YAAAX,2DAAA,CAAAa,GAAA;YAAA,OAAAb,yDAAA,CAAcO,GAAA,CAAAjC,WAAA,CAAY,OAAO,EAAAqC,MAAA,CAAS;UAAA,EAAC;UACjIX,uDAAA,aAA0B;UAC5BA,0DAAA,EAAM;UACNA,4DAAA,eAAiI;UAA1CA,wDAA1C,uBAAAmB,sDAAAR,MAAA;YAAAX,2DAAA,CAAAa,GAAA;YAAA,OAAAb,yDAAA,CAAaO,GAAA,CAAAzC,WAAA,CAAY,MAAM,EAAA6C,MAAA,CAAS;UAAA,EAAC,uBAAAS,sDAAAT,MAAA;YAAAX,2DAAA,CAAAa,GAAA;YAAA,OAAAb,yDAAA,CAAcO,GAAA,CAAAjC,WAAA,CAAY,MAAM,EAAAqC,MAAA,CAAS;UAAA,EAAC;UAC9HX,uDAAA,cAA0B;UAC5BA,0DAAA,EAAM;UACNA,4DAAA,eAAuI;UAA5CA,wDAA5C,uBAAAqB,sDAAAV,MAAA;YAAAX,2DAAA,CAAAa,GAAA;YAAA,OAAAb,yDAAA,CAAaO,GAAA,CAAAzC,WAAA,CAAY,QAAQ,EAAA6C,MAAA,CAAS;UAAA,EAAC,uBAAAW,sDAAAX,MAAA;YAAAX,2DAAA,CAAAa,GAAA;YAAA,OAAAb,yDAAA,CAAcO,GAAA,CAAAjC,WAAA,CAAY,QAAQ,EAAAqC,MAAA,CAAS;UAAA,EAAC;UACpIX,uDAAA,cAA0B;UAC5BA,0DAAA,EAAM;UACNA,4DAAA,eAA8H;UAAzCA,wDAAzC,uBAAAuB,sDAAAZ,MAAA;YAAAX,2DAAA,CAAAa,GAAA;YAAA,OAAAb,yDAAA,CAAaO,GAAA,CAAAzC,WAAA,CAAY,KAAK,EAAA6C,MAAA,CAAS;UAAA,EAAC,uBAAAa,sDAAAb,MAAA;YAAAX,2DAAA,CAAAa,GAAA;YAAA,OAAAb,yDAAA,CAAcO,GAAA,CAAAjC,WAAA,CAAY,KAAK,EAAAqC,MAAA,CAAS;UAAA,EAAC;UAC3HX,uDAAA,cAA0B;UAIpCA,0DAHQ,EAAM,EACF,EACJ,EACF;UACNA,uDAAA,qBAAiD;UACnDA,0DAAA,EAAM;;;UA3BcA,uDAAA,GAAiB;UAAjBA,wDAAA,QAAAO,GAAA,CAAAlF,SAAA,EAAA2E,2DAAA,CAAiB;UAI3BA,uDAAA,GAKE;UALFA,wDAAA,YAAAA,6DAAA,IAAA6B,GAAA,EAAAtB,GAAA,CAAAvE,SAAA,EAAAuE,GAAA,CAAAtE,YAAA,EAAAsE,GAAA,CAAArE,UAAA,EAAAqE,GAAA,CAAApE,WAAA,EAKE","sources":["./node_modules/rxjs/_esm2015/internal/operators/throttle.js","./node_modules/rxjs/_esm2015/internal/operators/throttleTime.js","./src/app/common/components/components.module.ts","./src/app/common/utils/ImageFileReader.ts","./src/app/common/components/image-crop/image-crop.component.ts","./src/app/common/components/image-crop/image-crop.component.html"],"sourcesContent":["import { SimpleOuterSubscriber, innerSubscribe, SimpleInnerSubscriber } from '../innerSubscribe';\nexport const defaultThrottleConfig = {\n    leading: true,\n    trailing: false\n};\nexport function throttle(durationSelector, config = defaultThrottleConfig) {\n    return (source) => source.lift(new ThrottleOperator(durationSelector, !!config.leading, !!config.trailing));\n}\nclass ThrottleOperator {\n    constructor(durationSelector, leading, trailing) {\n        this.durationSelector = durationSelector;\n        this.leading = leading;\n        this.trailing = trailing;\n    }\n    call(subscriber, source) {\n        return source.subscribe(new ThrottleSubscriber(subscriber, this.durationSelector, this.leading, this.trailing));\n    }\n}\nclass ThrottleSubscriber extends SimpleOuterSubscriber {\n    constructor(destination, durationSelector, _leading, _trailing) {\n        super(destination);\n        this.destination = destination;\n        this.durationSelector = durationSelector;\n        this._leading = _leading;\n        this._trailing = _trailing;\n        this._hasValue = false;\n    }\n    _next(value) {\n        this._hasValue = true;\n        this._sendValue = value;\n        if (!this._throttled) {\n            if (this._leading) {\n                this.send();\n            }\n            else {\n                this.throttle(value);\n            }\n        }\n    }\n    send() {\n        const { _hasValue, _sendValue } = this;\n        if (_hasValue) {\n            this.destination.next(_sendValue);\n            this.throttle(_sendValue);\n        }\n        this._hasValue = false;\n        this._sendValue = undefined;\n    }\n    throttle(value) {\n        const duration = this.tryDurationSelector(value);\n        if (!!duration) {\n            this.add(this._throttled = innerSubscribe(duration, new SimpleInnerSubscriber(this)));\n        }\n    }\n    tryDurationSelector(value) {\n        try {\n            return this.durationSelector(value);\n        }\n        catch (err) {\n            this.destination.error(err);\n            return null;\n        }\n    }\n    throttlingDone() {\n        const { _throttled, _trailing } = this;\n        if (_throttled) {\n            _throttled.unsubscribe();\n        }\n        this._throttled = undefined;\n        if (_trailing) {\n            this.send();\n        }\n    }\n    notifyNext() {\n        this.throttlingDone();\n    }\n    notifyComplete() {\n        this.throttlingDone();\n    }\n}\n","import { Subscriber } from '../Subscriber';\nimport { async } from '../scheduler/async';\nimport { defaultThrottleConfig } from './throttle';\nexport function throttleTime(duration, scheduler = async, config = defaultThrottleConfig) {\n    return (source) => source.lift(new ThrottleTimeOperator(duration, scheduler, config.leading, config.trailing));\n}\nclass ThrottleTimeOperator {\n    constructor(duration, scheduler, leading, trailing) {\n        this.duration = duration;\n        this.scheduler = scheduler;\n        this.leading = leading;\n        this.trailing = trailing;\n    }\n    call(subscriber, source) {\n        return source.subscribe(new ThrottleTimeSubscriber(subscriber, this.duration, this.scheduler, this.leading, this.trailing));\n    }\n}\nclass ThrottleTimeSubscriber extends Subscriber {\n    constructor(destination, duration, scheduler, leading, trailing) {\n        super(destination);\n        this.duration = duration;\n        this.scheduler = scheduler;\n        this.leading = leading;\n        this.trailing = trailing;\n        this._hasTrailingValue = false;\n        this._trailingValue = null;\n    }\n    _next(value) {\n        if (this.throttled) {\n            if (this.trailing) {\n                this._trailingValue = value;\n                this._hasTrailingValue = true;\n            }\n        }\n        else {\n            this.add(this.throttled = this.scheduler.schedule(dispatchNext, this.duration, { subscriber: this }));\n            if (this.leading) {\n                this.destination.next(value);\n            }\n            else if (this.trailing) {\n                this._trailingValue = value;\n                this._hasTrailingValue = true;\n            }\n        }\n    }\n    _complete() {\n        if (this._hasTrailingValue) {\n            this.destination.next(this._trailingValue);\n            this.destination.complete();\n        }\n        else {\n            this.destination.complete();\n        }\n    }\n    clearThrottle() {\n        const throttled = this.throttled;\n        if (throttled) {\n            if (this.trailing && this._hasTrailingValue) {\n                this.destination.next(this._trailingValue);\n                this._trailingValue = null;\n                this._hasTrailingValue = false;\n            }\n            throttled.unsubscribe();\n            this.remove(throttled);\n            this.throttled = null;\n        }\n    }\n}\nfunction dispatchNext(arg) {\n    const { subscriber } = arg;\n    subscriber.clearThrottle();\n}\n","import { ImageCropComponent } from './image-crop/image-crop.component';\r\nimport { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { MatButtonModule } from '@angular/material/button';\r\n\r\n\r\n\r\n@NgModule({\r\n  declarations: [\r\n    ImageCropComponent,\r\n  ],\r\n  imports: [\r\n    CommonModule,\r\n    MatButtonModule,\r\n  ],\r\n  exports: [\r\n    ImageCropComponent,\r\n  ]\r\n})\r\nexport class ComponentsModule { }\r\n","import { Observable, Subscriber } from 'rxjs';\r\n\r\nexport class ImageFileReader {\r\n  public static convertFileToImageBase64(imgFile: File): Observable<{imageData: string}> {\r\n    return new Observable((observer: Subscriber<{imageData: string}>)=> {\r\n      const reader = new FileReader();\r\n      reader.onloadend = evt => {\r\n        observer.next({imageData: evt.target.result as string});\r\n        observer.complete();\r\n      };\r\n      reader.onerror = () => observer.error();\r\n      reader.readAsDataURL(imgFile);\r\n    });\r\n  }\r\n}\r\n","import { Subject } from 'rxjs';\r\nimport { Component, OnInit, Input, ViewChild, ElementRef,\r\n  ChangeDetectionStrategy, OnDestroy, Output, EventEmitter,\r\n   OnChanges, SimpleChanges, ChangeDetectorRef } from '@angular/core';\r\nimport { throttleTime, takeUntil} from 'rxjs/operators';\r\n\r\ntype Border = 'left' | 'right' | 'top' | 'bottom';\r\n\r\n@Component({\n  standalone: false,\r\n  selector: 'app-image-crop',\r\n  templateUrl: './image-crop.component.html',\r\n  styleUrls: ['./image-crop.component.scss'],\r\n  changeDetection: ChangeDetectionStrategy.OnPush,\r\n})\r\nexport class ImageCropComponent implements OnInit, OnChanges, OnDestroy {\r\n\r\n  @ViewChild('imageContainer')\r\n  imgContainerElement: ElementRef<HTMLElement>;\r\n  @ViewChild('cropRect')\r\n  cropRectElement: ElementRef<HTMLElement>;\r\n  @ViewChild('image')\r\n  imageElement: ElementRef<HTMLImageElement>;\r\n  @ViewChild('canvas')\r\n  canvasElement: ElementRef<HTMLCanvasElement>;\r\n\r\n  @Input() imageData: string;\r\n\r\n  @Output() croppedImage = new EventEmitter<string>();\r\n  @Output() isCropping = new EventEmitter<boolean>();\r\n\r\n  currentlyDragging: Border;\r\n\r\n  topOffset = '10px';\r\n  bottomOffset = '10px';\r\n  leftOffset = '10px';\r\n  rightOffset = '10px';\r\n\r\n  private readonly onDestroyed$ = new Subject<void>();\r\n  private readonly borderDragged$ = new Subject<{event: {viewPortX: number, viewPortY: number}, border:Border}>();\r\n\r\n  constructor(private readonly cdr: ChangeDetectorRef) { }\r\n\r\n  ngOnInit(): void {\r\n    this.borderDragged$\r\n    .pipe(\r\n      throttleTime(100),\r\n      takeUntil(this.onDestroyed$),\r\n    )\r\n    .subscribe(({event:{viewPortX: clientX, viewPortY: clientY}, border}) => {\r\n      const imgCtrRect = this.imgContainerElement.nativeElement.getBoundingClientRect();\r\n      const left = clientX - imgCtrRect.x;\r\n      const top = clientY - imgCtrRect.y;\r\n      switch(border) {\r\n        case 'left':\r\n          this.leftOffset = left >=0 ? left + 'px' : this.leftOffset;\r\n          break;\r\n        case 'right':\r\n          const newRight = imgCtrRect.width - left ;\r\n          this.rightOffset = newRight >= 0 ? newRight+'px': this.rightOffset;\r\n          break;\r\n        case 'top':\r\n          this.topOffset = top >=0 ? top + 'px' : this.topOffset;\r\n          break;\r\n        case 'bottom':\r\n          const newBottom = imgCtrRect.height - top;\r\n          this.bottomOffset = newBottom>=0 ? newBottom+ 'px' : this.bottomOffset;\r\n          break;\r\n      }\r\n      this.cdr.detectChanges();\r\n    })\r\n  }\r\n\r\n  ngOnChanges(changes: SimpleChanges): void {\r\n    this.leftOffset = this.topOffset = this.rightOffset = this.bottomOffset = '10px';\r\n  }\r\n\r\n  ngOnDestroy(): void {\r\n    this.onDestroyed$.next();\r\n    this.onDestroyed$.complete();\r\n  }\r\n\r\n  onDragStart(border: Border, event: DragEvent) {\r\n    this.currentlyDragging = border;\r\n    const img = new Image();\r\n    img.src = 'data:image/gif;base64,R0lGODlhAQABAIAAAAUEBAAAACwAAAAAAQABAAACAkQBADs=';\r\n    event.dataTransfer.setDragImage(img, 0, 0);\r\n  }\r\n\r\n  onDragOver(event: DragEvent) {\r\n    this.borderDragged$.next({event: {\r\n      viewPortX: event.clientX,\r\n      viewPortY: event.clientY,\r\n    },\r\n    border: this.currentlyDragging})\r\n  }\r\n\r\n  onTouchDrag(border: Border, event: TouchEvent) {\r\n    event.preventDefault();\r\n    const touchedPoint = event.touches[0];\r\n    this.borderDragged$.next({event: {viewPortX: touchedPoint.clientX, viewPortY: touchedPoint.clientY}, border})\r\n  }\r\n\r\n  cropImage() {\r\n    const img = this.imageElement.nativeElement;\r\n    const cropBoxBoundingRect = this.cropRectElement.nativeElement.getBoundingClientRect();\r\n    const containerBoundingRect = this.imgContainerElement.nativeElement.getBoundingClientRect();\r\n    const scalingX = img.naturalWidth / containerBoundingRect.width;\r\n    const scalingY = img.naturalHeight / containerBoundingRect.height;\r\n\r\n    const offsetX = (cropBoxBoundingRect.left - containerBoundingRect.left) * scalingX;\r\n    const offsetY = (cropBoxBoundingRect.top - containerBoundingRect.top) * scalingY;\r\n    const cropedImgWidth = cropBoxBoundingRect.width * scalingX;\r\n    const cropedImgHeight = cropBoxBoundingRect.height * scalingY;\r\n\r\n    this.isCropping.emit(true);\r\n    const canvas = this.canvasElement.nativeElement;\r\n    canvas.width = cropedImgWidth;\r\n    canvas.height = cropedImgHeight;\r\n    const context = canvas.getContext('2d');\r\n\r\n    context.drawImage(img, offsetX, offsetY, cropedImgWidth, cropedImgHeight, 0, 0, cropedImgWidth, cropedImgHeight);\r\n\r\n    canvas.toBlob((blob) => {\r\n      const reader = new FileReader();\r\n      reader.readAsDataURL(blob);\r\n      reader.onloadend = () => {\r\n          const base64data = reader.result as string;\r\n          this.croppedImage.emit(base64data);\r\n          this.isCropping.emit(false);\r\n      };\r\n    });\r\n  }\r\n\r\n}\r\n","<div>\r\n  <div class=\"crop-container\">\r\n    <div class=\"image-container\"\r\n      #imageContainer\r\n      (dragover)=\"onDragOver($event)\">\r\n        <img #image [src]=\"imageData\">\r\n\r\n        <div class=\"crop-rect\"\r\n          #cropRect\r\n          [ngStyle]=\"{\r\n            'top': topOffset,\r\n            'bottom': bottomOffset,\r\n            'left': leftOffset,\r\n            'right': rightOffset\r\n          }\"\r\n        >\r\n          <div class=\"crop-rect-right\" draggable=\"true\" (dragstart)=\"onDragStart('right', $event)\" (touchmove)=\"onTouchDrag('right', $event)\">\r\n            <div class=\"circle\"></div>\r\n          </div>\r\n          <div class=\"crop-rect-left\" draggable=\"true\" (dragstart)=\"onDragStart('left', $event)\" (touchmove)=\"onTouchDrag('left', $event)\">\r\n            <div class=\"circle\"></div>\r\n          </div>\r\n          <div class=\"crop-rect-bottom\" draggable=\"true\" (dragstart)=\"onDragStart('bottom', $event)\" (touchmove)=\"onTouchDrag('bottom', $event)\">\r\n            <div class=\"circle\"></div>\r\n          </div>\r\n          <div class=\"crop-rect-top\" draggable=\"true\" (dragstart)=\"onDragStart('top', $event)\" (touchmove)=\"onTouchDrag('top', $event)\">\r\n            <div class=\"circle\"></div>\r\n          </div>\r\n        </div>\r\n    </div>\r\n  </div>\r\n  <canvas #canvas style='display: none;' ></canvas>\r\n</div>\r\n"],"names":["SimpleOuterSubscriber","innerSubscribe","SimpleInnerSubscriber","defaultThrottleConfig","leading","trailing","throttle","durationSelector","config","source","lift","ThrottleOperator","constructor","call","subscriber","subscribe","ThrottleSubscriber","destination","_leading","_trailing","_hasValue","_next","value","_sendValue","_throttled","send","next","undefined","duration","tryDurationSelector","add","err","error","throttlingDone","unsubscribe","notifyNext","notifyComplete","Subscriber","async","throttleTime","scheduler","ThrottleTimeOperator","ThrottleTimeSubscriber","_hasTrailingValue","_trailingValue","throttled","schedule","dispatchNext","_complete","complete","clearThrottle","remove","arg","ImageCropComponent","CommonModule","MatButtonModule","ComponentsModule","declarations","imports","exports","Observable","ImageFileReader","convertFileToImageBase64","imgFile","observer","reader","FileReader","onloadend","evt","imageData","target","result","onerror","readAsDataURL","Subject","EventEmitter","takeUntil","cdr","croppedImage","isCropping","topOffset","bottomOffset","leftOffset","rightOffset","onDestroyed$","borderDragged$","ngOnInit","pipe","event","viewPortX","clientX","viewPortY","clientY","border","imgCtrRect","imgContainerElement","nativeElement","getBoundingClientRect","left","x","top","y","newRight","width","newBottom","height","detectChanges","ngOnChanges","changes","ngOnDestroy","onDragStart","currentlyDragging","img","Image","src","dataTransfer","setDragImage","onDragOver","onTouchDrag","preventDefault","touchedPoint","touches","cropImage","imageElement","cropBoxBoundingRect","cropRectElement","containerBoundingRect","scalingX","naturalWidth","scalingY","naturalHeight","offsetX","offsetY","cropedImgWidth","cropedImgHeight","emit","canvas","canvasElement","context","getContext","drawImage","toBlob","blob","base64data","i0","ɵɵdirectiveInject","ChangeDetectorRef","selectors","viewQuery","ImageCropComponent_Query","rf","ctx","ɵɵelementStart","ɵɵlistener","ImageCropComponent_Template_div_dragover_2_listener","$event","ɵɵrestoreView","_r1","ɵɵresetView","ɵɵelement","ImageCropComponent_Template_div_dragstart_8_listener","ImageCropComponent_Template_div_touchmove_8_listener","ɵɵelementEnd","ImageCropComponent_Template_div_dragstart_10_listener","ImageCropComponent_Template_div_touchmove_10_listener","ImageCropComponent_Template_div_dragstart_12_listener","ImageCropComponent_Template_div_touchmove_12_listener","ImageCropComponent_Template_div_dragstart_14_listener","ImageCropComponent_Template_div_touchmove_14_listener","ɵɵadvance","ɵɵproperty","ɵɵsanitizeUrl","ɵɵpureFunction4","_c4"],"sourceRoot":"webpack:///","x_google_ignoreList":[0,1]}