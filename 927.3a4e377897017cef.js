"use strict";(self.webpackChunkprog_tools=self.webpackChunkprog_tools||[]).push([[927],{4927:(S,h,s)=>{s.r(h),s.d(h,{CountdownModule:()=>J});var u=s(617),l=s(2296),d=s(6814),g=s(2620),t=s(5879);class T{constructor(r,n){this.id=r,this.timerFullDuration=n}}var a=s(2079),_=s(3291),C=s(1412),x=s(6657),p=s(9352),D=s(6124),y=s(2068),Z=s(3075);let v=(()=>{class o{constructor(){}ngOnInit(){}static#t=this.\u0275fac=function(e){return new(e||o)};static#n=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-count-down-dial-view"]],inputs:{hh:"hh",mm:"mm",ss:"ss"},decls:10,vars:3,consts:[[1,"dial","hour","time"],[1,"dial"],[1,"dial","min","time"],[1,"dial","se","time"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0),t._uU(1),t.qZA(),t.TgZ(2,"div",1),t._uU(3,":"),t.qZA(),t.TgZ(4,"div",2),t._uU(5),t.qZA(),t.TgZ(6,"div",1),t._uU(7,":"),t.qZA(),t.TgZ(8,"div",3),t._uU(9),t.qZA()),2&e&&(t.xp6(1),t.hij(" ",i.hh," "),t.xp6(4),t.hij(" ",i.mm,""),t.xp6(4),t.Oqu(i.ss))},styles:["[_nghost-%COMP%]{display:flex}.dial[_ngcontent-%COMP%]{flex:1 1 auto;display:flex;flex-direction:column;justify-content:center;text-align:center}"]})}return o})(),b=(()=>{class o{constructor(){}ngOnInit(){}static#t=this.\u0275fac=function(e){return new(e||o)};static#n=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-count-down-dial-edit"]],inputs:{hh:"hh",mm:"mm",ss:"ss"},decls:25,vars:3,consts:[[1,"dial","hour","time"],[1,"time"],[1,"dial"],[1,"dial","min","time"],[1,"dial","se","time"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"button"),t._uU(2,"+"),t.qZA(),t.TgZ(3,"div",1),t._uU(4),t.qZA(),t.TgZ(5,"button"),t._uU(6,"-"),t.qZA()(),t.TgZ(7,"div",2),t._uU(8,":"),t.qZA(),t.TgZ(9,"div",3)(10,"button"),t._uU(11,"+"),t.qZA(),t.TgZ(12,"div",1),t._uU(13),t.qZA(),t.TgZ(14,"button"),t._uU(15,"-"),t.qZA()(),t.TgZ(16,"div",2),t._uU(17,":"),t.qZA(),t.TgZ(18,"div",4)(19,"button"),t._uU(20,"+"),t.qZA(),t.TgZ(21,"div",1),t._uU(22),t.qZA(),t.TgZ(23,"button"),t._uU(24,"-"),t.qZA()()),2&e&&(t.xp6(4),t.Oqu(i.hh),t.xp6(9),t.Oqu(i.mm),t.xp6(9),t.Oqu(i.ss))},styles:["[_nghost-%COMP%]{display:flex}.dial[_ngcontent-%COMP%]{flex:1 1 auto;display:flex;flex-direction:column;justify-content:center;text-align:center}"]})}return o})();function M(o,r){if(1&o&&t._UZ(0,"app-count-down-dial-view",8),2&o){const n=t.oxw();t.Q6J("hh",n.hh)("mm",n.mm)("ss",n.ss)}}function O(o,r){if(1&o&&t._UZ(0,"app-count-down-dial-edit",8),2&o){const n=t.oxw();t.Q6J("hh",n.hh)("mm",n.mm)("ss",n.ss)}}function A(o,r){if(1&o){const n=t.EpF();t.TgZ(0,"button",9),t.NdJ("click",function(){t.CHM(n);const i=t.oxw();return t.KtG(i.onEdit())}),t.TgZ(1,"mat-icon",7),t._uU(2,"edit"),t.qZA()()}2&o&&(t.xp6(1),t.Q6J("inline",!0))}function I(o,r){if(1&o){const n=t.EpF();t.TgZ(0,"button",10),t.NdJ("click",function(){t.CHM(n);const i=t.oxw();return t.KtG(i.onEditComplete())}),t.TgZ(1,"mat-icon",7),t._uU(2,"done"),t.qZA()()}2&o&&(t.xp6(1),t.Q6J("inline",!0))}let f=(()=>{class o{constructor(n){this.cdr=n,this._onDestroy$=new a.xQ,this.deleteClicked=new t.vpe,this.completed=new t.vpe}ngOnInit(){}ngOnChanges(n){if(n.countDownData){const e=n.countDownData.currentValue;e&&this.setTimer(e.timerFullDuration)}if(n.passedSeconds$){this.subscription&&this.subscription.unsubscribe();const e=n.passedSeconds$.currentValue;e&&(this.subscription=e.pipe((0,p.R)(this._onDestroy$),(0,p.R)(this.completed)).subscribe(i=>{const c=this.countDownData.timerFullDuration-i;this.setTimer(c),this.cdr.markForCheck(),c<=0&&this.completed.emit()}))}}ngOnDestroy(){C.l.onComponentDestroyed(this._onDestroy$)}reset(){this.setTimer(this.countDownData.timerFullDuration)}setTimer(n){n<0||(this.ss=n%60,n=Math.round(n/60),this.mm=n%60,n=Math.round(n/60),this.hh=n)}onEdit(){this.isInEditMode=!0}onEditComplete(){this.isInEditMode=!1}static#t=this.\u0275fac=function(e){return new(e||o)(t.Y36(t.sBO))};static#n=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-count-down-timer"]],inputs:{countDownData:"countDownData",passedSeconds$:"passedSeconds$"},outputs:{deleteClicked:"deleteClicked",completed:"completed"},features:[t.TTD],decls:13,vars:5,consts:[[1,"timer"],[3,"hh","mm","ss",4,"ngIf"],[1,"controls-group"],[1,"button-container"],["mat-flat-button","","color","primary","class","controls","aria-label","Edit the time",3,"click",4,"ngIf"],["mat-flat-button","","color","accent","class","controls","aria-label","Finish editing the time",3,"click",4,"ngIf"],["mat-flat-button","","color","warn","aria-label","Delete the countdown",1,"controls",3,"click"],[3,"inline"],[3,"hh","mm","ss"],["mat-flat-button","","color","primary","aria-label","Edit the time",1,"controls",3,"click"],["mat-flat-button","","color","accent","aria-label","Finish editing the time",1,"controls",3,"click"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0),t.YNc(1,M,1,3,"app-count-down-dial-view",1),t.YNc(2,O,1,3,"app-count-down-dial-edit",1),t.TgZ(3,"div",2)(4,"div",3),t.YNc(5,A,3,1,"button",4),t.YNc(6,I,3,1,"button",5),t.TgZ(7,"button",6),t.NdJ("click",function(){return i.deleteClicked.emit()}),t.TgZ(8,"mat-icon",7),t._uU(9,"delete"),t.qZA()()(),t.TgZ(10,"div",3)(11,"mat-icon"),t._uU(12,"reorder"),t.qZA()()()()),2&e&&(t.xp6(1),t.Q6J("ngIf",!i.isInEditMode),t.xp6(1),t.Q6J("ngIf",i.isInEditMode),t.xp6(3),t.Q6J("ngIf",!i.isInEditMode),t.xp6(1),t.Q6J("ngIf",i.isInEditMode),t.xp6(2),t.Q6J("inline",!0))},dependencies:[d.O5,l.lW,u.Hw,v,b],styles:[".timer[_ngcontent-%COMP%]{display:flex;box-shadow:0 0 8px 2px #888;border-radius:9px;padding:4px}.timer[_ngcontent-%COMP%]   app-count-down-dial[_ngcontent-%COMP%], .timer[_ngcontent-%COMP%]   app-count-down-dial-edit[_ngcontent-%COMP%]{flex:1 1 auto;margin:0}.controls-group[_ngcontent-%COMP%]{display:flex;margin-left:5px}.button-container[_ngcontent-%COMP%]{display:flex;margin-left:4px;flex-direction:column;justify-content:center}.button-container[_ngcontent-%COMP%]   .controls[_ngcontent-%COMP%]{margin:2px;flex:1 1 auto}.controls[_ngcontent-%COMP%]{min-width:20px;padding:0 10px;line-height:20px}app-count-down-dial-view[_ngcontent-%COMP%]{flex:1 1 auto}"]})}return o})();var P=s(3248),w=s(4025);function U(o,r){if(1&o){const n=t.EpF();t.TgZ(0,"app-count-down-timer",5),t.NdJ("deleteClicked",function(){const c=t.CHM(n).$implicit,m=t.oxw();return t.KtG(m.onDeleteClicked(c.id))})("completed",function(){const i=t.CHM(n),c=i.$implicit,m=i.index,E=t.oxw();return t.KtG(E.onTimerCompleted(c.id,m))}),t.qZA()}if(2&o){const n=r.$implicit,e=r.index,i=t.oxw();t.Q6J("countDownData",n)("passedSeconds$",i.runIndividually&&i.runningIndex!=e?null:i.passedSeconds$)}}let k=(()=>{class o{get passedSeconds$(){return this.passedSecondsSubject.pipe((0,x.B)())}constructor(n,e){this.cdr=e,this.destroy$=new a.xQ,this.onReset$=new a.xQ,this.nextId=0,this.isPlaying=!1,this.passedTime=0,this.runIndividually=!0,this.sort=!1,this.replay=!0,this.countdownTimers=[],this.passedSecondsSubject=new a.xQ,this.runningIndex=0,this.tickPerSecond$=n.getSeconds$().pipe((0,p.R)(this.destroy$),(0,D.U)(i=>Math.ceil(i/1e3)),(0,y.x)())}ngOnInit(){this.countdownTimers=this.countdownTimers.concat(this.createNewTimerData()).concat(this.createNewTimerData()).concat(this.createNewTimerData())}ngOnDestroy(){this.passedSecondsSubject.complete(),C.l.onComponentDestroyed(this.destroy$)}onAddGroup(){this.countdownTimers=this.countdownTimers.concat(this.createNewTimerData()),this.sort&&(this.countdownTimers=this.countdownTimers.sort((n,e)=>n.timerFullDuration-e.timerFullDuration))}onDeleteClicked(n){this.countdownTimers=this.countdownTimers.filter(e=>e.id!==n)}trackTimerFn(n,e){return e.id}togglePlay(){if(this.isPlaying=!this.isPlaying,this.isPlaying){const e=this.onReset$.pipe((0,Z.O)(void 0));this.subscription=(0,_.aj)([this.tickPerSecond$,e]).subscribe(()=>this.passedSecondsSubject.next(this.passedTime++))}else this.subscription&&this.subscription.unsubscribe()}createNewTimerData(){return new T(this.nextId++,Math.round(10*Math.random())+1)}onTimerCompleted(n,e){if(this.runIndividually){if(this.passedTime=1,this.runningIndex++,this.runningIndex>=this.countdownTimers.length){if(!this.replay)return;this.reset()}this.cdr.detectChanges(),this.onReset$.next()}}reset(){this.passedTime=0,this.runningIndex=0,this.childTimerComponents.forEach(n=>n.reset()),this.cdr.detectChanges(),this.onReset$.next()}static#t=this.\u0275fac=function(e){return new(e||o)(t.Y36(P.u),t.Y36(t.sBO))};static#n=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-count-down-group"]],viewQuery:function(e,i){if(1&e&&t.Gf(f,5),2&e){let c;t.iGM(c=t.CRH())&&(i.childTimerComponents=c)}},inputs:{runIndividually:"runIndividually",sort:"sort",replay:"replay"},decls:13,vars:3,consts:[[1,"container"],["mode","determinate","value","40"],[1,"controls"],["mat-fab","","color","primary","aria-label","add new timer to the group",1,"group-item",3,"click"],["class","group-item",3,"countDownData","passedSeconds$","deleteClicked","completed",4,"ngFor","ngForOf","ngForTrackBy"],[1,"group-item",3,"countDownData","passedSeconds$","deleteClicked","completed"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0),t._UZ(1,"mat-progress-bar",1),t.TgZ(2,"div",2)(3,"button",3),t.NdJ("click",function(){return i.onAddGroup()}),t.TgZ(4,"mat-icon"),t._uU(5,"add"),t.qZA()(),t.TgZ(6,"button",3),t.NdJ("click",function(){return i.togglePlay()}),t.TgZ(7,"mat-icon"),t._uU(8),t.qZA()(),t.TgZ(9,"button",3),t.NdJ("click",function(){return i.reset()}),t.TgZ(10,"mat-icon"),t._uU(11,"refresh"),t.qZA()()(),t.YNc(12,U,1,2,"app-count-down-timer",4),t.qZA()),2&e&&(t.xp6(8),t.Oqu(i.isPlaying?"pause":"play_arrow"),t.xp6(4),t.Q6J("ngForOf",i.countdownTimers)("ngForTrackBy",i.trackTimerFn))},dependencies:[d.sg,l.cs,u.Hw,w.pW,f],styles:[".container[_ngcontent-%COMP%]{display:flex;flex-direction:column;flex-wrap:wrap;padding:5px;border:1px solid rgba(39,35,35,.726)}.container[_ngcontent-%COMP%]   .group-item[_ngcontent-%COMP%]{flex:1 1 auto;margin:5px}"]})}return o})();const F=[{path:"",component:(()=>{class o{constructor(){}ngOnInit(){}static#t=this.\u0275fac=function(e){return new(e||o)};static#n=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-countdown"]],decls:4,vars:0,consts:[[1,"countdown"]],template:function(e,i){1&e&&(t.TgZ(0,"div")(1,"div",0),t._UZ(2,"app-count-down-group")(3,"app-count-down-group"),t.qZA()())},dependencies:[k],styles:["app-count-down-group[_ngcontent-%COMP%]{flex:1 1 auto;margin:16px}.countdown[_ngcontent-%COMP%]{display:flex;flex-direction:row}"]})}return o})()}];let $=(()=>{class o{static#t=this.\u0275fac=function(e){return new(e||o)};static#n=this.\u0275mod=t.oAB({type:o});static#e=this.\u0275inj=t.cJS({imports:[g.Bz.forChild(F),g.Bz]})}return o})(),J=(()=>{class o{static#t=this.\u0275fac=function(e){return new(e||o)};static#n=this.\u0275mod=t.oAB({type:o});static#e=this.\u0275inj=t.cJS({imports:[d.ez,$,l.ot,u.Ps,w.Cv]})}return o})()}}]);