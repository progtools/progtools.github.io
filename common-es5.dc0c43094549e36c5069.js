!function(){function t(e,n){return(t=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(e,n)}function e(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var i,o=r(t);if(e){var c=r(this).constructor;i=Reflect.construct(o,arguments,c)}else i=o.apply(this,arguments);return n(this,i)}}function n(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function r(t){return(r=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function o(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}function c(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(self.webpackChunkprog_tools=self.webpackChunkprog_tools||[]).push([[592],{712:function(t,e,n){"use strict";n.d(e,{K:function(){return a}});var r=n(8583),i=n(1095),o=n(7716),a=function(){var t=function t(){c(this,t)};return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=o.oAB({type:t}),t.\u0275inj=o.cJS({imports:[[r.ez,i.ot]]}),t}()},6758:function(n,r,i){"use strict";i.d(r,{d:function(){return y}});var a=i(9765),u=i(7716),s=i(7393),g=i(3637),l={leading:!0,trailing:!1},f=function(){function t(e,n,r,i){c(this,t),this.duration=e,this.scheduler=n,this.leading=r,this.trailing=i}return o(t,[{key:"call",value:function(t,e){return e.subscribe(new h(t,this.duration,this.scheduler,this.leading,this.trailing))}}]),t}(),h=function(n){!function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),n&&t(e,n)}(i,n);var r=e(i);function i(t,e,n,o,a){var u;return c(this,i),(u=r.call(this,t)).duration=e,u.scheduler=n,u.leading=o,u.trailing=a,u._hasTrailingValue=!1,u._trailingValue=null,u}return o(i,[{key:"_next",value:function(t){this.throttled?this.trailing&&(this._trailingValue=t,this._hasTrailingValue=!0):(this.add(this.throttled=this.scheduler.schedule(p,this.duration,{subscriber:this})),this.leading?this.destination.next(t):this.trailing&&(this._trailingValue=t,this._hasTrailingValue=!0))}},{key:"_complete",value:function(){this._hasTrailingValue?(this.destination.next(this._trailingValue),this.destination.complete()):this.destination.complete()}},{key:"clearThrottle",value:function(){var t=this.throttled;t&&(this.trailing&&this._hasTrailingValue&&(this.destination.next(this._trailingValue),this._trailingValue=null,this._hasTrailingValue=!1),t.unsubscribe(),this.remove(t),this.throttled=null)}}]),i}(s.L);function p(t){t.subscriber.clearThrottle()}var d=i(6782),v=i(8583),m=["imageContainer"],O=["cropRect"],b=["image"],_=["canvas"],C=function(t,e,n,r){return{top:t,bottom:e,left:n,right:r}},y=function(){var t=function(){function t(e){c(this,t),this.cdr=e,this.croppedImage=new u.vpe,this.isCropping=new u.vpe,this.topOffset="10px",this.bottomOffset="10px",this.leftOffset="10px",this.rightOffset="10px",this.onDestroyed$=new a.xQ,this.borderDragged$=new a.xQ}return o(t,[{key:"ngOnInit",value:function(){var t=this;this.borderDragged$.pipe(function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:g.P,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:l;return function(r){return r.lift(new f(t,e,n.leading,n.trailing))}}(100),(0,d.R)(this.onDestroyed$)).subscribe(function(e){var n=e.event,r=n.viewPortX,i=n.viewPortY,o=e.border,c=t.imgContainerElement.nativeElement.getBoundingClientRect(),a=r-c.x,u=i-c.y;switch(o){case"left":t.leftOffset=a>=0?a+"px":t.leftOffset;break;case"right":var s=c.width-a;t.rightOffset=s>=0?s+"px":t.rightOffset;break;case"top":t.topOffset=u>=0?u+"px":t.topOffset;break;case"bottom":var g=c.height-u;t.bottomOffset=g>=0?g+"px":t.bottomOffset}t.cdr.detectChanges()})}},{key:"ngOnChanges",value:function(t){this.leftOffset=this.topOffset=this.rightOffset=this.bottomOffset="10px"}},{key:"ngOnDestroy",value:function(){this.onDestroyed$.next(),this.onDestroyed$.complete()}},{key:"onDragStart",value:function(t,e){this.currentlyDragging=t;var n=new Image;n.src="data:image/gif;base64,R0lGODlhAQABAIAAAAUEBAAAACwAAAAAAQABAAACAkQBADs=",e.dataTransfer.setDragImage(n,0,0)}},{key:"onDragOver",value:function(t){this.borderDragged$.next({event:{viewPortX:t.clientX,viewPortY:t.clientY},border:this.currentlyDragging})}},{key:"onTouchDrag",value:function(t,e){e.preventDefault();var n=e.touches[0];this.borderDragged$.next({event:{viewPortX:n.clientX,viewPortY:n.clientY},border:t})}},{key:"cropImage",value:function(){var t=this,e=this.imageElement.nativeElement,n=this.cropRectElement.nativeElement.getBoundingClientRect(),r=this.imgContainerElement.nativeElement.getBoundingClientRect(),i=e.naturalWidth/r.width,o=e.naturalHeight/r.height,c=(n.left-r.left)*i,a=(n.top-r.top)*o,u=n.width*i,s=n.height*o;this.isCropping.emit(!0);var g=this.canvasElement.nativeElement;g.width=u,g.height=s,g.getContext("2d").drawImage(e,c,a,u,s,0,0,u,s),g.toBlob(function(e){var n=new FileReader;n.readAsDataURL(e),n.onloadend=function(){t.croppedImage.emit(n.result),t.isCropping.emit(!1)}})}}]),t}();return t.\u0275fac=function(e){return new(e||t)(u.Y36(u.sBO))},t.\u0275cmp=u.Xpm({type:t,selectors:[["app-image-crop"]],viewQuery:function(t,e){var n;(1&t&&(u.Gf(m,5),u.Gf(O,5),u.Gf(b,5),u.Gf(_,5)),2&t)&&(u.iGM(n=u.CRH())&&(e.imgContainerElement=n.first),u.iGM(n=u.CRH())&&(e.cropRectElement=n.first),u.iGM(n=u.CRH())&&(e.imageElement=n.first),u.iGM(n=u.CRH())&&(e.canvasElement=n.first))},inputs:{imageData:"imageData"},outputs:{croppedImage:"croppedImage",isCropping:"isCropping"},features:[u.TTD],decls:18,vars:7,consts:[[1,"crop-container"],[1,"image-container",3,"dragover"],["imageContainer",""],[3,"src"],["image",""],[1,"crop-rect",3,"ngStyle"],["cropRect",""],["draggable","true",1,"crop-rect-right",3,"dragstart","touchmove"],[1,"circle"],["draggable","true",1,"crop-rect-left",3,"dragstart","touchmove"],["draggable","true",1,"crop-rect-bottom",3,"dragstart","touchmove"],["draggable","true",1,"crop-rect-top",3,"dragstart","touchmove"],[2,"display","none"],["canvas",""]],template:function(t,e){1&t&&(u.TgZ(0,"div"),u.TgZ(1,"div",0),u.TgZ(2,"div",1,2),u.NdJ("dragover",function(t){return e.onDragOver(t)}),u._UZ(4,"img",3,4),u.TgZ(6,"div",5,6),u.TgZ(8,"div",7),u.NdJ("dragstart",function(t){return e.onDragStart("right",t)})("touchmove",function(t){return e.onTouchDrag("right",t)}),u._UZ(9,"div",8),u.qZA(),u.TgZ(10,"div",9),u.NdJ("dragstart",function(t){return e.onDragStart("left",t)})("touchmove",function(t){return e.onTouchDrag("left",t)}),u._UZ(11,"div",8),u.qZA(),u.TgZ(12,"div",10),u.NdJ("dragstart",function(t){return e.onDragStart("bottom",t)})("touchmove",function(t){return e.onTouchDrag("bottom",t)}),u._UZ(13,"div",8),u.qZA(),u.TgZ(14,"div",11),u.NdJ("dragstart",function(t){return e.onDragStart("top",t)})("touchmove",function(t){return e.onTouchDrag("top",t)}),u._UZ(15,"div",8),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u._UZ(16,"canvas",12,13),u.qZA()),2&t&&(u.xp6(4),u.Q6J("src",e.imageData,u.LSH),u.xp6(2),u.Q6J("ngStyle",u.l5B(2,C,e.topOffset,e.bottomOffset,e.leftOffset,e.rightOffset)))},directives:[v.PC],styles:[".crop-container[_ngcontent-%COMP%]{text-align:center}.image-container[_ngcontent-%COMP%]{margin:auto;display:inline-block;position:relative}.image-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;max-height:calc(100vh - 30px);-o-object-fit:scale-down;object-fit:scale-down}.image-container[_ngcontent-%COMP%]   .crop-rect[_ngcontent-%COMP%]{position:absolute}.image-container[_ngcontent-%COMP%]   .crop-rect-bottom[_ngcontent-%COMP%], .image-container[_ngcontent-%COMP%]   .crop-rect-left[_ngcontent-%COMP%], .image-container[_ngcontent-%COMP%]   .crop-rect-right[_ngcontent-%COMP%], .image-container[_ngcontent-%COMP%]   .crop-rect-top[_ngcontent-%COMP%]{position:absolute;background-color:red}.image-container[_ngcontent-%COMP%]   .crop-rect-left[_ngcontent-%COMP%]{left:0;height:100%;width:2px;cursor:ew-resize}.image-container[_ngcontent-%COMP%]   .crop-rect-right[_ngcontent-%COMP%]{right:0;height:100%;width:2px;cursor:ew-resize}.image-container[_ngcontent-%COMP%]   .crop-rect-top[_ngcontent-%COMP%]{top:0;width:100%;height:2px;cursor:ns-resize}.image-container[_ngcontent-%COMP%]   .crop-rect-bottom[_ngcontent-%COMP%]{bottom:0;width:100%;height:2px;cursor:ns-resize}.image-container[_ngcontent-%COMP%]   .crop-rect[_ngcontent-%COMP%]   .circle[_ngcontent-%COMP%]{border-radius:10px;background-color:red;width:20px;height:20px;position:absolute}.image-container[_ngcontent-%COMP%]   .crop-rect-left[_ngcontent-%COMP%]   .circle[_ngcontent-%COMP%], .image-container[_ngcontent-%COMP%]   .crop-rect-right[_ngcontent-%COMP%]   .circle[_ngcontent-%COMP%]{top:calc(50% - 10px);left:-10px}.image-container[_ngcontent-%COMP%]   .crop-rect-bottom[_ngcontent-%COMP%]   .circle[_ngcontent-%COMP%], .image-container[_ngcontent-%COMP%]   .crop-rect-top[_ngcontent-%COMP%]   .circle[_ngcontent-%COMP%]{left:calc(50% - 10px);top:-10px}"],changeDetection:0}),t}()},5310:function(t,e,n){"use strict";n.d(e,{i:function(){return i}});var r=n(7574),i=function(){function t(){c(this,t)}return o(t,null,[{key:"convertFileToImageBase64",value:function(t){return new r.y(function(e){var n=new FileReader;n.onloadend=function(t){e.next({imageData:t.target.result}),e.complete()},n.onerror=function(){return e.error()},n.readAsDataURL(t)})}}]),t}()},2541:function(t,e,n){"use strict";n.d(e,{u:function(){return f}});var r=n(8002),i=n(7519),a=n(4458),u=n(1307),s=n(8634),g=n(8229),l=n(7716),f=function(){var t=function(){function t(){c(this,t),this.secondsTickers$=(0,s.H)(0,150).pipe((0,r.U)(function(){return Date.now()}),(0,i.x)(function(t,e){return Math.trunc(e/1e3)===Math.trunc(t/1e3)}),(0,a.O)(function(){return new g.t(1)}),(0,u.x)())}return o(t,[{key:"getSeconds$",value:function(){return this.secondsTickers$}}]),t}();return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=l.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t}()}}])}();