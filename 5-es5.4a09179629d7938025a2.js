!function(){function e(t,n){return(e=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(t,n)}function t(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,o=r(e);if(t){var a=r(this).constructor;i=Reflect.construct(o,arguments,a)}else i=o.apply(this,arguments);return n(this,i)}}function n(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function r(e){return(r=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function i(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,i=!1,o=void 0;try{for(var a,c=e[Symbol.iterator]();!(r=(a=c.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(s){i=!0,o=s}finally{try{r||null==c.return||c.return()}finally{if(i)throw o}}return n}(e,t)||o(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){if(e){if("string"==typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(e,t):void 0}}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t,n){return t&&s(e.prototype,t),n&&s(e,n),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{S5Eb:function(n,r,a){"use strict";a.r(r),a.d(r,"QrModule",(function(){return Q}));var s=a("ofXK"),l=a("tyNb"),h=a("HDdC"),f=a("LRne"),d=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this._onDecodeError.bind(this),i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.DEFAULT_CANVAS_SIZE,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"environment";c(this,e),this.$video=t,this.$canvas=document.createElement("canvas"),this._onDecode=n,this._preferredFacingMode=o,this._active=!1,this._paused=!1,this._flashOn=!1,"number"==typeof r?(i=r,console.warn("You're using a deprecated version of the QrScanner constructor which will be removed in the future")):this._onDecodeError=r,this.$canvas.width=i,this.$canvas.height=i,this._sourceRect={x:0,y:0,width:i,height:i},this._updateSourceRect=this._updateSourceRect.bind(this),this._onPlay=this._onPlay.bind(this),this._onVisibilityChange=this._onVisibilityChange.bind(this),this.$video.playsInline=!0,this.$video.muted=!0,this.$video.disablePictureInPicture=!0,this.$video.addEventListener("loadedmetadata",this._updateSourceRect),this.$video.addEventListener("play",this._onPlay),document.addEventListener("visibilitychange",this._onVisibilityChange),this._qrEnginePromise=e.createQrEngine()}return u(e,null,[{key:"hasCamera",value:function(){return navigator.mediaDevices?navigator.mediaDevices.enumerateDevices().then((function(e){return e.some((function(e){return"videoinput"===e.kind}))})).catch((function(){return!1})):Promise.resolve(!1)}}]),u(e,[{key:"hasFlash",value:function(){if(!("ImageCapture"in window))return Promise.resolve(!1);var e=this.$video.srcObject?this.$video.srcObject.getVideoTracks()[0]:null;return e?new ImageCapture(e).getPhotoCapabilities().then((function(e){return e.fillLightMode.includes("flash")})).catch((function(e){return console.warn(e),!1})):Promise.reject("Camera not started or not available")}},{key:"isFlashOn",value:function(){return this._flashOn}},{key:"toggleFlash",value:function(){return this._setFlash(!this._flashOn)}},{key:"turnFlashOff",value:function(){return this._setFlash(!1)}},{key:"turnFlashOn",value:function(){return this._setFlash(!0)}},{key:"destroy",value:function(){this.$video.removeEventListener("loadedmetadata",this._updateSourceRect),this.$video.removeEventListener("play",this._onPlay),document.removeEventListener("visibilitychange",this._onVisibilityChange),this.stop(),e._postWorkerMessage(this._qrEnginePromise,"close")}},{key:"start",value:function(){var e=this;if(this._active&&!this._paused)return Promise.resolve();if("https:"!==window.location.protocol&&console.warn("The camera stream is only accessible if the page is transferred via https."),this._active=!0,this._paused=!1,document.hidden)return Promise.resolve();if(clearTimeout(this._offTimeout),this._offTimeout=null,this.$video.srcObject)return this.$video.play(),Promise.resolve();var t=this._preferredFacingMode;return this._getCameraStream(t,!0).catch((function(){return t="environment"===t?"user":"environment",e._getCameraStream()})).then((function(n){t=e._getFacingMode(n)||t,e.$video.srcObject=n,e.$video.play(),e._setVideoMirror(t)})).catch((function(t){throw e._active=!1,t}))}},{key:"stop",value:function(){this.pause(),this._active=!1}},{key:"pause",value:function(){var e=this;this._paused=!0,this._active&&(this.$video.pause(),this._offTimeout||(this._offTimeout=setTimeout((function(){var t,n=function(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=o(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,c=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return c=e.done,e},e:function(e){s=!0,a=e},f:function(){try{c||null==n.return||n.return()}finally{if(s)throw a}}}}(e.$video.srcObject?e.$video.srcObject.getTracks():[]);try{for(n.s();!(t=n.n()).done;){t.value.stop()}}catch(r){n.e(r)}finally{n.f()}e.$video.srcObject=null,e._offTimeout=null}),300)))}},{key:"setGrayscaleWeights",value:function(t,n,r){var i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];e._postWorkerMessage(this._qrEnginePromise,"grayscaleWeights",{red:t,green:n,blue:r,useIntegerApproximation:i})}},{key:"setInversionMode",value:function(t){e._postWorkerMessage(this._qrEnginePromise,"inversionMode",t)}},{key:"_onPlay",value:function(){this._updateSourceRect(),this._scanFrame()}},{key:"_onVisibilityChange",value:function(){document.hidden?this.pause():this._active&&this.start()}},{key:"_updateSourceRect",value:function(){var e=Math.min(this.$video.videoWidth,this.$video.videoHeight),t=Math.round(2/3*e);this._sourceRect.width=this._sourceRect.height=t,this._sourceRect.x=(this.$video.videoWidth-t)/2,this._sourceRect.y=(this.$video.videoHeight-t)/2}},{key:"_scanFrame",value:function(){var t=this;if(!this._active||this.$video.paused||this.$video.ended)return!1;requestAnimationFrame((function(){t.$video.readyState<=1?t._scanFrame():t._qrEnginePromise.then((function(n){return e.scanImage(t.$video,t._sourceRect,n,t.$canvas,!0)})).then(t._onDecode,(function(n){t._active&&(-1!==(n.message||n).indexOf("service unavailable")&&(t._qrEnginePromise=e.createQrEngine()),t._onDecodeError(n))})).then((function(){return t._scanFrame()}))}))}},{key:"_onDecodeError",value:function(t){t!==e.NO_QR_CODE_FOUND&&console.log(t)}},{key:"_getCameraStream",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=[{width:{min:1024}},{width:{min:768}},{}];return e&&(t&&(e={exact:e}),n.forEach((function(t){return t.facingMode=e}))),this._getMatchingCameraStream(n)}},{key:"_getMatchingCameraStream",value:function(e){var t=this;return navigator.mediaDevices&&0!==e.length?navigator.mediaDevices.getUserMedia({video:e.shift()}).catch((function(){return t._getMatchingCameraStream(e)})):Promise.reject("Camera not found.")}},{key:"_setFlash",value:function(e){var t=this;return this.hasFlash().then((function(n){return n?t.$video.srcObject.getVideoTracks()[0].applyConstraints({advanced:[{torch:e}]}):Promise.reject("No flash available")})).then((function(){return t._flashOn=e}))}},{key:"_setVideoMirror",value:function(e){this.$video.style.transform="scaleX("+("user"===e?-1:1)+")"}},{key:"_getFacingMode",value:function(e){var t=e.getVideoTracks()[0];return t?/rear|back|environment/i.test(t.label)?"environment":/front|user|face/i.test(t.label)?"user":null:null}}],[{key:"scanImage",value:function(t){var n=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,c=arguments.length>4&&void 0!==arguments[4]&&arguments[4],s=arguments.length>5&&void 0!==arguments[5]&&arguments[5],u=o instanceof Worker,l=Promise.all([o||e.createQrEngine(),e._loadImage(t)]).then((function(t){var s,l,h=i(t,2),f=h[0],d=h[1];return o=f,s=i(n._drawToCanvas(d,r,a,c),2),a=s[0],l=s[1],o instanceof Worker?(u||o.postMessage({type:"inversionMode",data:"both"}),new Promise((function(t,n){var r,i,c;i=function(a){"qrResult"===a.data.type&&(o.removeEventListener("message",i),o.removeEventListener("error",c),clearTimeout(r),null!==a.data.data?t(a.data.data):n(e.NO_QR_CODE_FOUND))},c=function(e){o.removeEventListener("message",i),o.removeEventListener("error",c),clearTimeout(r),n("Scanner error: "+(e?e.message||e:"Unknown Error"))},o.addEventListener("message",i),o.addEventListener("error",c),r=setTimeout((function(){return c("timeout")}),1e4);var s=l.getImageData(0,0,a.width,a.height);o.postMessage({type:"decode",data:s},[s.data.buffer])}))):new Promise((function(t,n){var r=setTimeout((function(){return n("Scanner error: timeout")}),1e4);o.detect(a).then((function(r){r.length?t(r[0].rawValue):n(e.NO_QR_CODE_FOUND)})).catch((function(e){return n("Scanner error: "+(e.message||e))})).finally((function(){return clearTimeout(r)}))}))}));return r&&s&&(l=l.catch((function(){return e.scanImage(t,null,o,a,c)}))),l=l.finally((function(){u||e._postWorkerMessage(o,"close")}))}},{key:"createQrEngine",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.WORKER_PATH;return("BarcodeDetector"in window?BarcodeDetector.getSupportedFormats():Promise.resolve([])).then((function(e){return-1!==e.indexOf("qr_code")?new BarcodeDetector({formats:["qr_code"]}):new Worker(t)}))}},{key:"_drawToCanvas",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];n=n||document.createElement("canvas");var i=t&&t.x?t.x:0,o=t&&t.y?t.y:0,a=t&&t.width?t.width:e.width||e.videoWidth,c=t&&t.height?t.height:e.height||e.videoHeight;r||n.width===a&&n.height===c||(n.width=a,n.height=c);var s=n.getContext("2d",{alpha:!1});return s.imageSmoothingEnabled=!1,s.drawImage(e,i,o,a,c,0,0,n.width,n.height),[n,s]}},{key:"_loadImage",value:function(t){if(t instanceof HTMLCanvasElement||t instanceof HTMLVideoElement||window.ImageBitmap&&t instanceof window.ImageBitmap||window.OffscreenCanvas&&t instanceof window.OffscreenCanvas)return Promise.resolve(t);if(t instanceof Image)return e._awaitImageLoad(t).then((function(){return t}));if(t instanceof File||t instanceof Blob||t instanceof URL||"string"==typeof t){var n=new Image;return n.src=t instanceof File||t instanceof Blob?URL.createObjectURL(t):t,e._awaitImageLoad(n).then((function(){return(t instanceof File||t instanceof Blob)&&URL.revokeObjectURL(n.src),n}))}return Promise.reject("Unsupported image type.")}},{key:"_awaitImageLoad",value:function(e){return new Promise((function(t,n){var r,i;e.complete&&0!==e.naturalWidth?t():(r=function(){e.removeEventListener("load",r),e.removeEventListener("error",i),t()},i=function(){e.removeEventListener("load",r),e.removeEventListener("error",i),n("Image load error")},e.addEventListener("load",r),e.addEventListener("error",i))}))}},{key:"_postWorkerMessage",value:function(e,t,n){return Promise.resolve(e).then((function(e){e instanceof Worker&&e.postMessage({type:t,data:n})}))}}]),e}();d.DEFAULT_CANVAS_SIZE=400,d.NO_QR_CODE_FOUND="No QR code found",d.WORKER_PATH="qr-scanner-worker.min.js";var g=a("vkgz"),v=a("eIep"),m=a("JIr8"),p=a("fXoL"),b=a("XNiG"),y=a("7o/Q"),_=a("D0XW");a("l7GE"),a("ZUHj");var O={leading:!0,trailing:!1},w=function(){function e(t,n,r,i){c(this,e),this.duration=t,this.scheduler=n,this.leading=r,this.trailing=i}return u(e,[{key:"call",value:function(e,t){return t.subscribe(new E(e,this.duration,this.scheduler,this.leading,this.trailing))}}]),e}(),E=function(n){!function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),n&&e(t,n)}(i,n);var r=t(i);function i(e,t,n,o,a){var s;return c(this,i),(s=r.call(this,e)).duration=t,s.scheduler=n,s.leading=o,s.trailing=a,s._hasTrailingValue=!1,s._trailingValue=null,s}return u(i,[{key:"_next",value:function(e){this.throttled?this.trailing&&(this._trailingValue=e,this._hasTrailingValue=!0):(this.add(this.throttled=this.scheduler.schedule(k,this.duration,{subscriber:this})),this.leading?this.destination.next(e):this.trailing&&(this._trailingValue=e,this._hasTrailingValue=!0))}},{key:"_complete",value:function(){this._hasTrailingValue?(this.destination.next(this._trailingValue),this.destination.complete()):this.destination.complete()}},{key:"clearThrottle",value:function(){var e=this.throttled;e&&(this.trailing&&this._hasTrailingValue&&(this.destination.next(this._trailingValue),this._trailingValue=null,this._hasTrailingValue=!1),e.unsubscribe(),this.remove(e),this.throttled=null)}}]),i}(y.a);function k(e){e.subscriber.clearThrottle()}var C,R=a("1G5W"),P=a("bTqV"),D=["imageContainer"],j=["cropRect"],I=["image"],S=["canvas"],M=function(e,t,n,r){return{top:e,bottom:t,left:n,right:r}},A=((C=function(){function e(){c(this,e),this.croppedImage=new p.o,this.topOffset="10px",this.bottomOffset="10px",this.leftOffset="10px",this.rightOffset="10px",this.onDestroyed$=new b.a,this.mouseDragOverEvent$=new b.a}return u(e,[{key:"ngOnInit",value:function(){var e=this;this.mouseDragOverEvent$.pipe(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:_.a,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:O;return function(r){return r.lift(new w(e,t,n.leading,n.trailing))}}(100),Object(R.a)(this.onDestroyed$)).subscribe((function(t){var n=t.event,r=t.border,i=n.target.getBoundingClientRect(),o=e.imgContainerElement.nativeElement.getBoundingClientRect(),a=i.left-o.left+n.offsetX,c=i.top-o.top+n.offsetY;switch(r){case"left":e.leftOffset=a+"px";break;case"right":e.rightOffset=o.width-a+"px";break;case"top":e.topOffset=c+"px";break;case"bottom":e.bottomOffset=o.height-c+"px"}}))}},{key:"ngOnChanges",value:function(e){this.leftOffset=this.topOffset=this.rightOffset=this.bottomOffset="10px"}},{key:"ngOnDestroy",value:function(){this.onDestroyed$.next(),this.onDestroyed$.complete()}},{key:"onDragStart",value:function(e,t){this.currentlyDragging=e;var n=new Image;n.src="data:image/gif;base64,R0lGODlhAQABAIAAAAUEBAAAACwAAAAAAQABAAACAkQBADs=",t.dataTransfer.setDragImage(n,0,0)}},{key:"onDragOver",value:function(e){this.mouseDragOverEvent$.next({event:e,border:this.currentlyDragging})}},{key:"cropImage",value:function(){var e=this.imageElement.nativeElement,t=this.cropRectElement.nativeElement.getBoundingClientRect(),n=this.imgContainerElement.nativeElement.getBoundingClientRect(),r=e.naturalWidth/n.width,i=e.naturalHeight/n.height,o=(t.left-n.left)*r,a=(t.top-n.top)*i,c=t.width*r,s=t.height*i,u=this.canvasElement.nativeElement;u.width=c,u.height=s,u.getContext("2d").drawImage(e,o,a,c,s,0,0,c,s),this.croppedImage.next(u.toDataURL())}}]),e}()).\u0275fac=function(e){return new(e||C)},C.\u0275cmp=p.Gb({type:C,selectors:[["app-image-crop"]],viewQuery:function(e,t){var n;1&e&&(p.vc(D,!0),p.vc(j,!0),p.vc(I,!0),p.vc(S,!0)),2&e&&(p.jc(n=p.bc())&&(t.imgContainerElement=n.first),p.jc(n=p.bc())&&(t.cropRectElement=n.first),p.jc(n=p.bc())&&(t.imageElement=n.first),p.jc(n=p.bc())&&(t.canvasElement=n.first))},inputs:{imageData:"imageData"},outputs:{croppedImage:"croppedImage"},features:[p.Ab],decls:15,vars:7,consts:[[1,"image-container",3,"dragover"],["imageContainer",""],[3,"src"],["image",""],[1,"crop-rect",3,"ngStyle"],["cropRect",""],["draggable","true",1,"crop-rect-left",3,"dragstart"],["draggable","true",1,"crop-rect-right",3,"dragstart"],["draggable","true",1,"crop-rect-top",3,"dragstart"],["draggable","true",1,"crop-rect-bottom",3,"dragstart"],["mat-raised-button","","mat-primary","",3,"click"],[2,"display","none"],["canvas",""]],template:function(e,t){1&e&&(p.Sb(0,"div"),p.Sb(1,"div",0,1),p.ac("dragover",(function(e){return t.onDragOver(e)})),p.Nb(3,"img",2,3),p.Sb(5,"div",4,5),p.Sb(7,"div",6),p.ac("dragstart",(function(e){return t.onDragStart("left",e)})),p.Rb(),p.Sb(8,"div",7),p.ac("dragstart",(function(e){return t.onDragStart("right",e)})),p.Rb(),p.Sb(9,"div",8),p.ac("dragstart",(function(e){return t.onDragStart("top",e)})),p.Rb(),p.Sb(10,"div",9),p.ac("dragstart",(function(e){return t.onDragStart("bottom",e)})),p.Rb(),p.Rb(),p.Rb(),p.Rb(),p.Sb(11,"button",10),p.ac("click",(function(){return t.cropImage()})),p.sc(12,"CROP"),p.Rb(),p.Nb(13,"canvas",11,12)),2&e&&(p.Cb(3),p.hc("src",t.imageData,p.mc),p.Cb(2),p.hc("ngStyle",p.ic(2,M,t.topOffset,t.bottomOffset,t.leftOffset,t.rightOffset)))},directives:[s.k,P.a],styles:[".image-container[_ngcontent-%COMP%]{margin:auto;display:inline-block;position:relative}.image-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:100%;max-height:100%;-o-object-fit:scale-down;object-fit:scale-down}.image-container[_ngcontent-%COMP%]   .crop-rect[_ngcontent-%COMP%]{position:absolute}.image-container[_ngcontent-%COMP%]   .crop-rect-bottom[_ngcontent-%COMP%], .image-container[_ngcontent-%COMP%]   .crop-rect-left[_ngcontent-%COMP%], .image-container[_ngcontent-%COMP%]   .crop-rect-right[_ngcontent-%COMP%], .image-container[_ngcontent-%COMP%]   .crop-rect-top[_ngcontent-%COMP%]{position:absolute;background-color:red}.image-container[_ngcontent-%COMP%]   .crop-rect-left[_ngcontent-%COMP%]{left:0;height:100%;width:2px;cursor:ew-resize}.image-container[_ngcontent-%COMP%]   .crop-rect-right[_ngcontent-%COMP%]{right:0;height:100%;width:2px;cursor:ew-resize}.image-container[_ngcontent-%COMP%]   .crop-rect-top[_ngcontent-%COMP%]{top:0;width:100%;height:2px;cursor:ns-resize}.image-container[_ngcontent-%COMP%]   .crop-rect-bottom[_ngcontent-%COMP%]{bottom:0;width:100%;height:2px;cursor:ns-resize}"],changeDetection:0}),C);function T(e,t){if(1&e&&(p.Sb(0,"div",3),p.sc(1),p.Rb()),2&e){var n=p.cc();p.Cb(1),p.tc(n.qrResult)}}function $(e,t){if(1&e&&(p.Sb(0,"div",4),p.sc(1),p.Rb()),2&e){var n=p.cc();p.Cb(1),p.uc(" ",n.qrError,". If you think the image contains qr code please crop the image to just contain the qr Code. Use the red box below over the image to select the qr portion and click on the crop button at the bottom of the image.\n")}}function x(e,t){if(1&e){var n=p.Tb();p.Sb(0,"div",4),p.Sb(1,"app-image-crop",5),p.ac("croppedImage",(function(e){return p.lc(n),p.cc().onImageCrop(e)})),p.Rb(),p.Rb()}if(2&e){var r=p.cc();p.Cb(1),p.hc("imageData",r.errImg.imageData)}}d.WORKER_PATH="/assets/service-workers/qr-scanner-worker.min.js";var F,L,q,V,U=[{path:"",component:(F=function(){function e(t){c(this,e),this.cdr=t}return u(e,[{key:"ngOnInit",value:function(){}},{key:"onError",value:function(t,n){var r=this;return Object(f.a)(n).pipe(Object(g.a)((function(e){r.qrError="Unable to find qr code in the image",console.warn(e)})),Object(v.a)((function(){return e.convertFileToImageBase64(t)})),Object(g.a)((function(e){var t=e.imageData;return console.log(t)})),Object(g.a)((function(e){return r.errImg=e})))}},{key:"onErrorB64",value:function(e,t){var n=this;return Object(f.a)(t).pipe(Object(g.a)((function(e){n.qrError="Unable to find qr code in the image",console.warn(e)})),Object(g.a)((function(){return n.errImg={imageData:e}})))}},{key:"scanFile",value:function(e){var t=this;Object(f.a)(1).pipe(Object(g.a)((function(){return t.qrError=t.qrResult=""})),Object(v.a)((function(){return d.scanImage(e)})),Object(g.a)((function(e){return t.qrResult=e})),Object(m.a)((function(n){return t.onError(e,n)})),Object(g.a)((function(){return t.cdr.markForCheck()}))).subscribe()}},{key:"scanFileB64",value:function(e){var t=this;Object(f.a)(1).pipe(Object(g.a)((function(){return t.qrError=t.qrResult=""})),Object(v.a)((function(){var t=new HTMLImageElement;return t.src=e,d.scanImage(t)})),Object(g.a)((function(e){return t.qrResult=e})),Object(m.a)((function(n){return t.onErrorB64(e,n)})),Object(g.a)((function(){return t.cdr.markForCheck()}))).subscribe()}},{key:"fileChanged",value:function(e){this.scanFile(e.target.files[0])}},{key:"onImageCrop",value:function(e){this.scanFileB64(e)}}],[{key:"convertFileToImageBase64",value:function(e){return h.a.create((function(t){var n=new FileReader;n.onloadend=function(e){t.next({imageData:e.target.result}),t.complete()},n.onerror=function(){return t.error()},n.readAsDataURL(e)}))}}]),e}(),F.\u0275fac=function(e){return new(e||F)(p.Mb(p.h))},F.\u0275cmp=p.Gb({type:F,selectors:[["app-qr"]],decls:5,vars:3,consts:[["class","success",4,"ngIf"],["class","error",4,"ngIf"],["type","file","accept","image/*",3,"change"],[1,"success"],[1,"error"],[3,"imageData","croppedImage"]],template:function(e,t){1&e&&(p.rc(0,T,2,1,"div",0),p.rc(1,$,2,1,"div",1),p.rc(2,x,2,1,"div",1),p.sc(3,"\nUpload image with QR code\n"),p.Sb(4,"input",2),p.ac("change",(function(e){return t.fileChanged(e)})),p.Rb()),2&e&&(p.hc("ngIf",t.qrResult),p.Cb(1),p.hc("ngIf",t.qrError),p.Cb(1),p.hc("ngIf",t.errImg))},directives:[s.j,A],styles:[".success[_ngcontent-%COMP%]{color:rgba(25,102,63,.582)}.error[_ngcontent-%COMP%]{color:red}"],changeDetection:0}),F)}],B=((V=function e(){c(this,e)}).\u0275mod=p.Kb({type:V}),V.\u0275inj=p.Jb({factory:function(e){return new(e||V)},imports:[[l.e.forChild(U)],l.e]}),V),W=((q=function e(){c(this,e)}).\u0275mod=p.Kb({type:q}),q.\u0275inj=p.Jb({factory:function(e){return new(e||q)},imports:[[s.c,P.b]]}),q),Q=((L=function e(){c(this,e)}).\u0275mod=p.Kb({type:L}),L.\u0275inj=p.Jb({factory:function(e){return new(e||L)},imports:[[s.c,W,B]]}),L)}}])}();