"use strict";(self.webpackChunkprog_tools=self.webpackChunkprog_tools||[]).push([[343],{4343:(W,m,a)=>{a.r(m),a.d(m,{CropModule:()=>P});var e=a(1360),c=a(2881),u=a(777);const _=["determinateSpinner"];function h(n,s){if(1&n&&(e.qSk(),e.j41(0,"svg",11),e.nrm(1,"circle",12),e.k0s()),2&n){const r=e.XpG();e.BMQ("viewBox",r._viewBox()),e.R7$(),e.xc7("stroke-dasharray",r._strokeCircumference(),"px")("stroke-dashoffset",r._strokeCircumference()/2,"px")("stroke-width",r._circleStrokeWidth(),"%"),e.BMQ("r",r._circleRadius())}}const f=new e.nKC("mat-progress-spinner-default-options",{providedIn:"root",factory:function C(){return{diameter:p}}}),p=100;let k=(()=>{class n{_elementRef=(0,e.WQX)(e.aKT);_noopAnimations;get color(){return this._color||this._defaultColor}set color(r){this._color=r}_color;_defaultColor="primary";_determinateCircle;constructor(){const r=(0,e.WQX)(e.bc$,{optional:!0}),t=(0,e.WQX)(f);this._noopAnimations="NoopAnimations"===r&&!!t&&!t._forceAnimations,this.mode="mat-spinner"===this._elementRef.nativeElement.nodeName.toLowerCase()?"indeterminate":"determinate",t&&(t.color&&(this.color=this._defaultColor=t.color),t.diameter&&(this.diameter=t.diameter),t.strokeWidth&&(this.strokeWidth=t.strokeWidth))}mode;get value(){return"determinate"===this.mode?this._value:0}set value(r){this._value=Math.max(0,Math.min(100,r||0))}_value=0;get diameter(){return this._diameter}set diameter(r){this._diameter=r||0}_diameter=p;get strokeWidth(){return this._strokeWidth??this.diameter/10}set strokeWidth(r){this._strokeWidth=r||0}_strokeWidth;_circleRadius(){return(this.diameter-10)/2}_viewBox(){const r=2*this._circleRadius()+this.strokeWidth;return`0 0 ${r} ${r}`}_strokeCircumference(){return 2*Math.PI*this._circleRadius()}_strokeDashOffset(){return"determinate"===this.mode?this._strokeCircumference()*(100-this._value)/100:null}_circleStrokeWidth(){return this.strokeWidth/this.diameter*100}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=e.VBU({type:n,selectors:[["mat-progress-spinner"],["mat-spinner"]],viewQuery:function(t,i){if(1&t&&e.GBs(_,5),2&t){let o;e.mGM(o=e.lsd())&&(i._determinateCircle=o.first)}},hostAttrs:["role","progressbar","tabindex","-1",1,"mat-mdc-progress-spinner","mdc-circular-progress"],hostVars:18,hostBindings:function(t,i){2&t&&(e.BMQ("aria-valuemin",0)("aria-valuemax",100)("aria-valuenow","determinate"===i.mode?i.value:null)("mode",i.mode),e.HbH("mat-"+i.color),e.xc7("width",i.diameter,"px")("height",i.diameter,"px")("--mdc-circular-progress-size",i.diameter+"px")("--mdc-circular-progress-active-indicator-width",i.diameter+"px"),e.AVh("_mat-animation-noopable",i._noopAnimations)("mdc-circular-progress--indeterminate","indeterminate"===i.mode))},inputs:{color:"color",mode:"mode",value:[2,"value","value",e.Udg],diameter:[2,"diameter","diameter",e.Udg],strokeWidth:[2,"strokeWidth","strokeWidth",e.Udg]},exportAs:["matProgressSpinner"],decls:14,vars:11,consts:[["circle",""],["determinateSpinner",""],["aria-hidden","true",1,"mdc-circular-progress__determinate-container"],["xmlns","http://www.w3.org/2000/svg","focusable","false",1,"mdc-circular-progress__determinate-circle-graphic"],["cx","50%","cy","50%",1,"mdc-circular-progress__determinate-circle"],["aria-hidden","true",1,"mdc-circular-progress__indeterminate-container"],[1,"mdc-circular-progress__spinner-layer"],[1,"mdc-circular-progress__circle-clipper","mdc-circular-progress__circle-left"],[3,"ngTemplateOutlet"],[1,"mdc-circular-progress__gap-patch"],[1,"mdc-circular-progress__circle-clipper","mdc-circular-progress__circle-right"],["xmlns","http://www.w3.org/2000/svg","focusable","false",1,"mdc-circular-progress__indeterminate-circle-graphic"],["cx","50%","cy","50%"]],template:function(t,i){if(1&t&&(e.DNE(0,h,2,8,"ng-template",null,0,e.C5r),e.j41(2,"div",2,1),e.qSk(),e.j41(4,"svg",3),e.nrm(5,"circle",4),e.k0s()(),e.joV(),e.j41(6,"div",5)(7,"div",6)(8,"div",7),e.eu8(9,8),e.k0s(),e.j41(10,"div",9),e.eu8(11,8),e.k0s(),e.j41(12,"div",10),e.eu8(13,8),e.k0s()()()),2&t){const o=e.sdS(1);e.R7$(4),e.BMQ("viewBox",i._viewBox()),e.R7$(),e.xc7("stroke-dasharray",i._strokeCircumference(),"px")("stroke-dashoffset",i._strokeDashOffset(),"px")("stroke-width",i._circleStrokeWidth(),"%"),e.BMQ("r",i._circleRadius()),e.R7$(4),e.Y8G("ngTemplateOutlet",o),e.R7$(2),e.Y8G("ngTemplateOutlet",o),e.R7$(2),e.Y8G("ngTemplateOutlet",o)}},dependencies:[c.T3],styles:[".mat-mdc-progress-spinner{display:block;overflow:hidden;line-height:0;position:relative;direction:ltr;transition:opacity 250ms cubic-bezier(0.4, 0, 0.6, 1)}.mat-mdc-progress-spinner circle{stroke-width:var(--mdc-circular-progress-active-indicator-width, 4px)}.mat-mdc-progress-spinner._mat-animation-noopable,.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__determinate-circle{transition:none !important}.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__indeterminate-circle-graphic,.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__spinner-layer,.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__indeterminate-container{animation:none !important}.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__indeterminate-container circle{stroke-dasharray:0 !important}@media(forced-colors: active){.mat-mdc-progress-spinner .mdc-circular-progress__indeterminate-circle-graphic,.mat-mdc-progress-spinner .mdc-circular-progress__determinate-circle{stroke:currentColor;stroke:CanvasText}}.mdc-circular-progress__determinate-container,.mdc-circular-progress__indeterminate-circle-graphic,.mdc-circular-progress__indeterminate-container,.mdc-circular-progress__spinner-layer{position:absolute;width:100%;height:100%}.mdc-circular-progress__determinate-container{transform:rotate(-90deg)}.mdc-circular-progress--indeterminate .mdc-circular-progress__determinate-container{opacity:0}.mdc-circular-progress__indeterminate-container{font-size:0;letter-spacing:0;white-space:nowrap;opacity:0}.mdc-circular-progress--indeterminate .mdc-circular-progress__indeterminate-container{opacity:1;animation:mdc-circular-progress-container-rotate 1568.2352941176ms linear infinite}.mdc-circular-progress__determinate-circle-graphic,.mdc-circular-progress__indeterminate-circle-graphic{fill:rgba(0,0,0,0)}.mat-mdc-progress-spinner .mdc-circular-progress__determinate-circle,.mat-mdc-progress-spinner .mdc-circular-progress__indeterminate-circle-graphic{stroke:var(--mdc-circular-progress-active-indicator-color, var(--mat-sys-primary))}@media(forced-colors: active){.mat-mdc-progress-spinner .mdc-circular-progress__determinate-circle,.mat-mdc-progress-spinner .mdc-circular-progress__indeterminate-circle-graphic{stroke:CanvasText}}.mdc-circular-progress__determinate-circle{transition:stroke-dashoffset 500ms cubic-bezier(0, 0, 0.2, 1)}.mdc-circular-progress__gap-patch{position:absolute;top:0;left:47.5%;box-sizing:border-box;width:5%;height:100%;overflow:hidden}.mdc-circular-progress__gap-patch .mdc-circular-progress__indeterminate-circle-graphic{left:-900%;width:2000%;transform:rotate(180deg)}.mdc-circular-progress__circle-clipper .mdc-circular-progress__indeterminate-circle-graphic{width:200%}.mdc-circular-progress__circle-right .mdc-circular-progress__indeterminate-circle-graphic{left:-100%}.mdc-circular-progress--indeterminate .mdc-circular-progress__circle-left .mdc-circular-progress__indeterminate-circle-graphic{animation:mdc-circular-progress-left-spin 1333ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress--indeterminate .mdc-circular-progress__circle-right .mdc-circular-progress__indeterminate-circle-graphic{animation:mdc-circular-progress-right-spin 1333ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress__circle-clipper{display:inline-flex;position:relative;width:50%;height:100%;overflow:hidden}.mdc-circular-progress--indeterminate .mdc-circular-progress__spinner-layer{animation:mdc-circular-progress-spinner-layer-rotate 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}@keyframes mdc-circular-progress-container-rotate{to{transform:rotate(360deg)}}@keyframes mdc-circular-progress-spinner-layer-rotate{12.5%{transform:rotate(135deg)}25%{transform:rotate(270deg)}37.5%{transform:rotate(405deg)}50%{transform:rotate(540deg)}62.5%{transform:rotate(675deg)}75%{transform:rotate(810deg)}87.5%{transform:rotate(945deg)}100%{transform:rotate(1080deg)}}@keyframes mdc-circular-progress-left-spin{from{transform:rotate(265deg)}50%{transform:rotate(130deg)}to{transform:rotate(265deg)}}@keyframes mdc-circular-progress-right-spin{from{transform:rotate(-265deg)}50%{transform:rotate(-130deg)}to{transform:rotate(-265deg)}}\n"],encapsulation:2,changeDetection:0})}return n})(),y=(()=>{class n{static \u0275fac=function(t){return new(t||n)};static \u0275mod=e.$C({type:n});static \u0275inj=e.G2t({imports:[u.M]})}return n})();var d=a(8834),l=a(3740),b=a(5389),g=a(5207),w=a(467),M=a(6932),S=a(8763);const T=["cropComponent"];function I(n,s){if(1&n){const r=e.RV6();e.j41(0,"app-image-crop",6,0),e.bIt("croppedImage",function(i){e.eBV(r);const o=e.XpG();return e.Njj(o.onImageCrop(i))})("isCropping",function(i){e.eBV(r);const o=e.XpG();return e.Njj(o.onIsCroppingChanged(i))}),e.k0s()}if(2&n){const r=e.XpG();e.xc7("visibility",r.isLoading()?"hidden":"visible"),e.Y8G("imageData",r.imageData())}}function x(n,s){1&n&&e.nrm(0,"mat-spinner")}function D(n,s){if(1&n){const r=e.RV6();e.j41(0,"div",7)(1,"button",8),e.bIt("click",function(){e.eBV(r);const i=e.XpG();return e.Njj(i.onCropClicked())}),e.EFF(2," CROP "),e.k0s(),e.j41(3,"button",9),e.bIt("click",function(){e.eBV(r);const i=e.XpG();return e.Njj(i.onDownloadClick())}),e.j41(4,"mat-icon"),e.EFF(5,"get_app"),e.k0s()()()}}const B=[{path:"",component:(()=>{class n{constructor(){this.isScanning=(0,e.vPA)(!1),this.isBeingCropped=(0,e.vPA)(!1),this.imageData=(0,e.vPA)(null),this.isLoading=(0,e.EWP)(()=>this.isScanning()||this.isBeingCropped())}set content(r){this.cropComponent=r}ngOnInit(){}scanFile(r){var t=this;return(0,w.A)(function*(){t.isScanning.set(!0);try{const i=yield M.x.convertFileToImageBase64(r);t.imageData.set(i.imageData)}catch(i){console.error(i)}finally{t.isScanning.set(!1)}})()}fileChanged(r){const i=r.target.files[0];i&&this.scanFile(i)}onImageCrop(r){this.imageData.set(r)}onDownloadClick(){const r=this.imageData();if(!r)return;const t=r.match(/^data:image\/([^;]+)/);this.downloadBase64File(r,`cropped-image.${t?t[1]:"png"}`)}downloadBase64File(r,t){const i=document.createElement("a");i.href=r,i.download=t,i.click(),this.isScanning.set(!0)}onIsCroppingChanged(r){this.isBeingCropped.set(r)}onCropClicked(){this.cropComponent&&this.cropComponent.cropImage()}static{this.\u0275fac=function(t){return new(t||n)}}static{this.\u0275cmp=e.VBU({type:n,selectors:[["app-crop"]],viewQuery:function(t,i){if(1&t&&e.GBs(T,5),2&t){let o;e.mGM(o=e.lsd())&&(i.content=o.first)}},standalone:!1,decls:6,vars:3,consts:[["cropComponent",""],[1,"crop-container"],[3,"visibility","imageData","croppedImage","isCropping",4,"ngIf"],[4,"ngIf"],["class","controls",4,"ngIf"],["type","file","accept","image/*",3,"change"],[3,"croppedImage","isCropping","imageData"],[1,"controls"],["mat-raised-button","","color","primary",3,"click"],["mat-raised-button","","aria-label","Download the image",3,"click"]],template:function(t,i){1&t&&(e.j41(0,"div",1),e.DNE(1,I,2,3,"app-image-crop",2)(2,x,1,0,"mat-spinner",3)(3,D,6,0,"div",4),e.k0s(),e.EFF(4," Upload image to crop\n"),e.j41(5,"input",5),e.bIt("change",function(j){return i.fileChanged(j)}),e.k0s()),2&t&&(e.R7$(),e.Y8G("ngIf",i.imageData()),e.R7$(),e.Y8G("ngIf",i.isLoading()),e.R7$(),e.Y8G("ngIf",!i.isScanning()&&i.imageData()))},dependencies:[c.bT,S.v,k,l.An,d.$z],styles:[".crop-container[_ngcontent-%COMP%]{position:relative;min-height:100px}.crop-container[_ngcontent-%COMP%]   mat-spinner[_ngcontent-%COMP%]{position:absolute;top:calc(50% - 50px);left:calc(50% - 50px)}.crop-container[_ngcontent-%COMP%]   .controls[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:not(:last-child){margin-right:4px}"],changeDetection:0})}}return n})()}];let R=(()=>{class n{static{this.\u0275fac=function(t){return new(t||n)}}static{this.\u0275mod=e.$C({type:n})}static{this.\u0275inj=e.G2t({imports:[g.iI.forChild(B),g.iI]})}}return n})(),P=(()=>{class n{static{this.\u0275fac=function(t){return new(t||n)}}static{this.\u0275mod=e.$C({type:n})}static{this.\u0275inj=e.G2t({imports:[c.MD,R,b.h,y,l.m_,d.Hl]})}}return n})()}}]);