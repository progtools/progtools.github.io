"use strict";(self.webpackChunkprog_tools=self.webpackChunkprog_tools||[]).push([[592],{712:(Z,v,g)=>{g.d(v,{K:()=>D});var x=g(6895),e=g(4859),d=g(4650);let D=(()=>{class c{}return c.\u0275fac=function(O){return new(O||c)},c.\u0275mod=d.oAB({type:c}),c.\u0275inj=d.cJS({imports:[x.ez,e.ot]}),c})()},4273:(Z,v,g)=>{g.d(v,{d:()=>W});var x=g(8929),e=g(4650),d=g(3489),D=g(353);const c={leading:!0,trailing:!1};class a{constructor(i,n,o,s){this.duration=i,this.scheduler=n,this.leading=o,this.trailing=s}call(i,n){return n.subscribe(new f(i,this.duration,this.scheduler,this.leading,this.trailing))}}class f extends d.L{constructor(i,n,o,s,h){super(i),this.duration=n,this.scheduler=o,this.leading=s,this.trailing=h,this._hasTrailingValue=!1,this._trailingValue=null}_next(i){this.throttled?this.trailing&&(this._trailingValue=i,this._hasTrailingValue=!0):(this.add(this.throttled=this.scheduler.schedule(l,this.duration,{subscriber:this})),this.leading?this.destination.next(i):this.trailing&&(this._trailingValue=i,this._hasTrailingValue=!0))}_complete(){this._hasTrailingValue?(this.destination.next(this._trailingValue),this.destination.complete()):this.destination.complete()}clearThrottle(){const i=this.throttled;i&&(this.trailing&&this._hasTrailingValue&&(this.destination.next(this._trailingValue),this._trailingValue=null,this._hasTrailingValue=!1),i.unsubscribe(),this.remove(i),this.throttled=null)}}function l(p){const{subscriber:i}=p;i.clearThrottle()}var m=g(7625),u=g(6895);const F=["imageContainer"],M=["cropRect"],P=["image"],L=["canvas"],k=function(p,i,n,o){return{top:p,bottom:i,left:n,right:o}};let W=(()=>{class p{constructor(n){this.cdr=n,this.croppedImage=new e.vpe,this.isCropping=new e.vpe,this.topOffset="10px",this.bottomOffset="10px",this.leftOffset="10px",this.rightOffset="10px",this.onDestroyed$=new x.xQ,this.borderDragged$=new x.xQ}ngOnInit(){this.borderDragged$.pipe(function C(p,i=D.P,n=c){return o=>o.lift(new a(p,i,n.leading,n.trailing))}(100),(0,m.R)(this.onDestroyed$)).subscribe(({event:{viewPortX:n,viewPortY:o},border:s})=>{const h=this.imgContainerElement.nativeElement.getBoundingClientRect(),E=n-h.x,w=o-h.y;switch(s){case"left":this.leftOffset=E>=0?E+"px":this.leftOffset;break;case"right":const S=h.width-E;this.rightOffset=S>=0?S+"px":this.rightOffset;break;case"top":this.topOffset=w>=0?w+"px":this.topOffset;break;case"bottom":const T=h.height-w;this.bottomOffset=T>=0?T+"px":this.bottomOffset}this.cdr.detectChanges()})}ngOnChanges(n){this.leftOffset=this.topOffset=this.rightOffset=this.bottomOffset="10px"}ngOnDestroy(){this.onDestroyed$.next(),this.onDestroyed$.complete()}onDragStart(n,o){this.currentlyDragging=n;const s=new Image;s.src="data:image/gif;base64,R0lGODlhAQABAIAAAAUEBAAAACwAAAAAAQABAAACAkQBADs=",o.dataTransfer.setDragImage(s,0,0)}onDragOver(n){this.borderDragged$.next({event:{viewPortX:n.clientX,viewPortY:n.clientY},border:this.currentlyDragging})}onTouchDrag(n,o){o.preventDefault();const s=o.touches[0];this.borderDragged$.next({event:{viewPortX:s.clientX,viewPortY:s.clientY},border:n})}cropImage(){const n=this.imageElement.nativeElement,o=this.cropRectElement.nativeElement.getBoundingClientRect(),s=this.imgContainerElement.nativeElement.getBoundingClientRect(),h=n.naturalWidth/s.width,E=n.naturalHeight/s.height,w=(o.left-s.left)*h,S=(o.top-s.top)*E,T=o.width*h,V=o.height*E;this.isCropping.emit(!0);const I=this.canvasElement.nativeElement;I.width=T,I.height=V,I.getContext("2d").drawImage(n,w,S,T,V,0,0,T,V),I.toBlob(G=>{const U=new FileReader;U.readAsDataURL(G),U.onloadend=()=>{this.croppedImage.emit(U.result),this.isCropping.emit(!1)}})}}return p.\u0275fac=function(n){return new(n||p)(e.Y36(e.sBO))},p.\u0275cmp=e.Xpm({type:p,selectors:[["app-image-crop"]],viewQuery:function(n,o){if(1&n&&(e.Gf(F,5),e.Gf(M,5),e.Gf(P,5),e.Gf(L,5)),2&n){let s;e.iGM(s=e.CRH())&&(o.imgContainerElement=s.first),e.iGM(s=e.CRH())&&(o.cropRectElement=s.first),e.iGM(s=e.CRH())&&(o.imageElement=s.first),e.iGM(s=e.CRH())&&(o.canvasElement=s.first)}},inputs:{imageData:"imageData"},outputs:{croppedImage:"croppedImage",isCropping:"isCropping"},features:[e.TTD],decls:18,vars:7,consts:[[1,"crop-container"],[1,"image-container",3,"dragover"],["imageContainer",""],[3,"src"],["image",""],[1,"crop-rect",3,"ngStyle"],["cropRect",""],["draggable","true",1,"crop-rect-right",3,"dragstart","touchmove"],[1,"circle"],["draggable","true",1,"crop-rect-left",3,"dragstart","touchmove"],["draggable","true",1,"crop-rect-bottom",3,"dragstart","touchmove"],["draggable","true",1,"crop-rect-top",3,"dragstart","touchmove"],[2,"display","none"],["canvas",""]],template:function(n,o){1&n&&(e.TgZ(0,"div")(1,"div",0)(2,"div",1,2),e.NdJ("dragover",function(h){return o.onDragOver(h)}),e._UZ(4,"img",3,4),e.TgZ(6,"div",5,6)(8,"div",7),e.NdJ("dragstart",function(h){return o.onDragStart("right",h)})("touchmove",function(h){return o.onTouchDrag("right",h)}),e._UZ(9,"div",8),e.qZA(),e.TgZ(10,"div",9),e.NdJ("dragstart",function(h){return o.onDragStart("left",h)})("touchmove",function(h){return o.onTouchDrag("left",h)}),e._UZ(11,"div",8),e.qZA(),e.TgZ(12,"div",10),e.NdJ("dragstart",function(h){return o.onDragStart("bottom",h)})("touchmove",function(h){return o.onTouchDrag("bottom",h)}),e._UZ(13,"div",8),e.qZA(),e.TgZ(14,"div",11),e.NdJ("dragstart",function(h){return o.onDragStart("top",h)})("touchmove",function(h){return o.onTouchDrag("top",h)}),e._UZ(15,"div",8),e.qZA()()()(),e._UZ(16,"canvas",12,13),e.qZA()),2&n&&(e.xp6(4),e.Q6J("src",o.imageData,e.LSH),e.xp6(2),e.Q6J("ngStyle",e.l5B(2,k,o.topOffset,o.bottomOffset,o.leftOffset,o.rightOffset)))},dependencies:[u.PC],styles:[".crop-container[_ngcontent-%COMP%]{text-align:center}.image-container[_ngcontent-%COMP%]{margin:auto;display:inline-block;position:relative}.image-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;max-height:calc(100vh - 30px);-o-object-fit:scale-down;object-fit:scale-down}.image-container[_ngcontent-%COMP%]   .crop-rect[_ngcontent-%COMP%]{position:absolute}.image-container[_ngcontent-%COMP%]   .crop-rect-left[_ngcontent-%COMP%], .image-container[_ngcontent-%COMP%]   .crop-rect-right[_ngcontent-%COMP%], .image-container[_ngcontent-%COMP%]   .crop-rect-top[_ngcontent-%COMP%], .image-container[_ngcontent-%COMP%]   .crop-rect-bottom[_ngcontent-%COMP%]{position:absolute;background-color:red}.image-container[_ngcontent-%COMP%]   .crop-rect-left[_ngcontent-%COMP%]{left:0;height:100%;width:2px;cursor:ew-resize}.image-container[_ngcontent-%COMP%]   .crop-rect-right[_ngcontent-%COMP%]{right:0;height:100%;width:2px;cursor:ew-resize}.image-container[_ngcontent-%COMP%]   .crop-rect-top[_ngcontent-%COMP%]{top:0;width:100%;height:2px;cursor:ns-resize}.image-container[_ngcontent-%COMP%]   .crop-rect-bottom[_ngcontent-%COMP%]{bottom:0;width:100%;height:2px;cursor:ns-resize}.image-container[_ngcontent-%COMP%]   .crop-rect[_ngcontent-%COMP%]   .circle[_ngcontent-%COMP%]{border-radius:10px;background-color:red;width:20px;height:20px;position:absolute}.image-container[_ngcontent-%COMP%]   .crop-rect-left[_ngcontent-%COMP%]   .circle[_ngcontent-%COMP%], .image-container[_ngcontent-%COMP%]   .crop-rect-right[_ngcontent-%COMP%]   .circle[_ngcontent-%COMP%]{top:calc(50% - 10px);left:-10px}.image-container[_ngcontent-%COMP%]   .crop-rect-top[_ngcontent-%COMP%]   .circle[_ngcontent-%COMP%], .image-container[_ngcontent-%COMP%]   .crop-rect-bottom[_ngcontent-%COMP%]   .circle[_ngcontent-%COMP%]{left:calc(50% - 10px);top:-10px}"],changeDetection:0}),p})()},5310:(Z,v,g)=>{g.d(v,{i:()=>e});var x=g(6498);class e{static convertFileToImageBase64(D){return new x.y(c=>{const b=new FileReader;b.onloadend=O=>{c.next({imageData:O.target.result}),c.complete()},b.onerror=()=>c.error(),b.readAsDataURL(D)})}}},9156:(Z,v,g)=>{g.d(v,{T:()=>C,s:()=>B});const x=["J","Z","I","H","G","F","E","D","C","B","A"],e=["X","W","U","T","R","Q","P","N","M","L","K"];var d=(()=>{return(a=d||(d={}))[a.before1968=0]="before1968",a[a.between1968_1999=1]="between1968_1999",a[a.after2000=2]="after2000",d;var a})();const D=[2,7,6,5,4,3,2];function c(a,f){return a=Math.ceil(a),f=Math.floor(f),Math.floor(Math.random()*(f-a+1))+a}function b(a,f){let l=0;for(let u=0;u<7;u++)l+=f[u]*D[u];switch(a){case"T":case"G":l+=4}const m=Math.floor(l%11);switch(a){case"S":case"T":return x[m];case"F":case"G":return e[m]}return" "}function B(a,f){const l=function O(a){return a<1968?d.before1968:a<=1999?d.between1968_1999:d.after2000}(f);let m;const u=[];switch(a){case"S":case"T":switch(l){case d.before1968:m="S",u.push(c(0,1));break;case d.between1968_1999:6===(m="S",u.push(c(6,9)),u[0])?u.push(c(8,9)):u.push(c(0,9));break;case d.after2000:m="T";const P=c(0,f%100);u.push(Math.floor(P/10)),u.push(P%10)}break;case"F":case"G":switch(l){case d.before1968:m="F",u.push(c(0,1));break;case d.between1968_1999:6===(m="F",u.push(c(6,9)),u[0])?u.push(c(8,9)):u.push(c(0,9));break;case d.after2000:m="G";const P=c(0,f%100);u.push(Math.floor(P/10)),u.push(P%10)}}for(let M=u.length;M<7;M++)u.push(c(0,9));const F=b(m,u);return[m,...u,F].join("")}function C(a){if("S"!==(a=a.toUpperCase()).charAt(0)&&"T"!==a.charAt(0)&&"F"!==a.charAt(0)&&"G"!==a.charAt(0)||!a.match("[S,T,F,G](\\d){7}\\w"))return!1;const f=a.substr(1,7).split("").map(m=>+m),l=b(a.charAt(0),f);return a.charAt(8)===l}},2541:(Z,v,g)=>{g.d(v,{u:()=>B});var x=g(4850),e=g(5778),d=g(2536),D=g(4327),c=g(8723),b=g(839),O=g(4650);let B=(()=>{class C{constructor(){this.secondsTickers$=(0,c.H)(0,150).pipe((0,x.U)(()=>Date.now()),(0,e.x)((f,l)=>Math.trunc(l/1e3)===Math.trunc(f/1e3)),(0,d.O)(()=>new b.t(1)),(0,D.x)())}getSeconds$(){return this.secondsTickers$}}return C.\u0275fac=function(f){return new(f||C)},C.\u0275prov=O.Yz7({token:C,factory:C.\u0275fac,providedIn:"root"}),C})()},8231:(Z,v,g)=>{g.d(v,{DS:()=>J});const d="function"==typeof atob,D="function"==typeof btoa,c="function"==typeof Buffer,b="function"==typeof TextDecoder?new TextDecoder:void 0,O="function"==typeof TextEncoder?new TextEncoder:void 0,C=Array.prototype.slice.call("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="),a=(t=>{let r={};return t.forEach((_,A)=>r[_]=A),r})(C),f=/^(?:[A-Za-z\d+\/]{4})*?(?:[A-Za-z\d+\/]{2}(?:==)?|[A-Za-z\d+\/]{3}=?)?$/,l=String.fromCharCode.bind(String),m="function"==typeof Uint8Array.from?Uint8Array.from.bind(Uint8Array):(t,r=(_=>_))=>new Uint8Array(Array.prototype.slice.call(t,0).map(r)),u=t=>t.replace(/=/g,"").replace(/[+\/]/g,r=>"+"==r?"-":"_"),F=t=>t.replace(/[^A-Za-z0-9\+\/]/g,""),M=t=>{let r,_,A,R,y="";const N=t.length%3;for(let j=0;j<t.length;){if((_=t.charCodeAt(j++))>255||(A=t.charCodeAt(j++))>255||(R=t.charCodeAt(j++))>255)throw new TypeError("invalid character found");r=_<<16|A<<8|R,y+=C[r>>18&63]+C[r>>12&63]+C[r>>6&63]+C[63&r]}return N?y.slice(0,N-3)+"===".substring(N):y},P=D?t=>btoa(t):c?t=>Buffer.from(t,"binary").toString("base64"):M,L=c?t=>Buffer.from(t).toString("base64"):t=>{let _=[];for(let A=0,R=t.length;A<R;A+=4096)_.push(l.apply(null,t.subarray(A,A+4096)));return P(_.join(""))},k=(t,r=!1)=>r?u(L(t)):L(t),W=t=>{if(t.length<2)return(r=t.charCodeAt(0))<128?t:r<2048?l(192|r>>>6)+l(128|63&r):l(224|r>>>12&15)+l(128|r>>>6&63)+l(128|63&r);var r=65536+1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320);return l(240|r>>>18&7)+l(128|r>>>12&63)+l(128|r>>>6&63)+l(128|63&r)},p=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,i=t=>t.replace(p,W),n=c?t=>Buffer.from(t,"utf8").toString("base64"):O?t=>L(O.encode(t)):t=>P(i(t)),o=(t,r=!1)=>r?u(n(t)):n(t),s=t=>o(t,!0),h=/[\xC0-\xDF][\x80-\xBF]|[\xE0-\xEF][\x80-\xBF]{2}|[\xF0-\xF7][\x80-\xBF]{3}/g,E=t=>{switch(t.length){case 4:var _=((7&t.charCodeAt(0))<<18|(63&t.charCodeAt(1))<<12|(63&t.charCodeAt(2))<<6|63&t.charCodeAt(3))-65536;return l(55296+(_>>>10))+l(56320+(1023&_));case 3:return l((15&t.charCodeAt(0))<<12|(63&t.charCodeAt(1))<<6|63&t.charCodeAt(2));default:return l((31&t.charCodeAt(0))<<6|63&t.charCodeAt(1))}},w=t=>t.replace(h,E),S=t=>{if(t=t.replace(/\s+/g,""),!f.test(t))throw new TypeError("malformed base64.");t+="==".slice(2-(3&t.length));let r,A,R,_="";for(let y=0;y<t.length;)r=a[t.charAt(y++)]<<18|a[t.charAt(y++)]<<12|(A=a[t.charAt(y++)])<<6|(R=a[t.charAt(y++)]),_+=64===A?l(r>>16&255):64===R?l(r>>16&255,r>>8&255):l(r>>16&255,r>>8&255,255&r);return _},T=d?t=>atob(F(t)):c?t=>Buffer.from(t,"base64").toString("binary"):S,V=c?t=>m(Buffer.from(t,"base64")):t=>m(T(t),r=>r.charCodeAt(0)),I=t=>V(G(t)),z=c?t=>Buffer.from(t,"base64").toString("utf8"):b?t=>b.decode(V(t)):t=>w(T(t)),G=t=>F(t.replace(/[-_]/g,r=>"-"==r?"+":"/")),U=t=>z(G(t)),$=t=>({value:t,enumerable:!1,writable:!0,configurable:!0}),Q=function(){const t=(r,_)=>Object.defineProperty(String.prototype,r,$(_));t("fromBase64",function(){return U(this)}),t("toBase64",function(r){return o(this,r)}),t("toBase64URI",function(){return o(this,!0)}),t("toBase64URL",function(){return o(this,!0)}),t("toUint8Array",function(){return I(this)})},H=function(){const t=(r,_)=>Object.defineProperty(Uint8Array.prototype,r,$(_));t("toBase64",function(r){return k(this,r)}),t("toBase64URI",function(){return k(this,!0)}),t("toBase64URL",function(){return k(this,!0)})},J={version:"3.7.2",VERSION:"3.7.2",atob:T,atobPolyfill:S,btoa:P,btoaPolyfill:M,fromBase64:U,toBase64:o,encode:o,encodeURI:s,encodeURL:s,utob:i,btou:w,decode:U,isValid:t=>{if("string"!=typeof t)return!1;const r=t.replace(/\s+/g,"").replace(/={0,2}$/,"");return!/[^\s0-9a-zA-Z\+/]/.test(r)||!/[^\s0-9a-zA-Z\-_]/.test(r)},fromUint8Array:k,toUint8Array:I,extendString:Q,extendUint8Array:H,extendBuiltins:()=>{Q(),H()}}}}]);