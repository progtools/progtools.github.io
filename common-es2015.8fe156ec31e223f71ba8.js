(self.webpackChunkprog_tools=self.webpackChunkprog_tools||[]).push([[592],{712:function(t,e,n){"use strict";n.d(e,{K:function(){return c}});var r=n(8583),i=n(1095),o=n(7716);let c=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=o.oAB({type:t}),t.\u0275inj=o.cJS({imports:[[r.ez,i.ot]]}),t})()},6758:function(t,e,n){"use strict";n.d(e,{d:function(){return O}});var r=n(9765),i=n(7716),o=n(7393),c=n(3637);const a={leading:!0,trailing:!1};class s{constructor(t,e,n,r){this.duration=t,this.scheduler=e,this.leading=n,this.trailing=r}call(t,e){return e.subscribe(new g(t,this.duration,this.scheduler,this.leading,this.trailing))}}class g extends o.L{constructor(t,e,n,r,i){super(t),this.duration=e,this.scheduler=n,this.leading=r,this.trailing=i,this._hasTrailingValue=!1,this._trailingValue=null}_next(t){this.throttled?this.trailing&&(this._trailingValue=t,this._hasTrailingValue=!0):(this.add(this.throttled=this.scheduler.schedule(h,this.duration,{subscriber:this})),this.leading?this.destination.next(t):this.trailing&&(this._trailingValue=t,this._hasTrailingValue=!0))}_complete(){this._hasTrailingValue?(this.destination.next(this._trailingValue),this.destination.complete()):this.destination.complete()}clearThrottle(){const t=this.throttled;t&&(this.trailing&&this._hasTrailingValue&&(this.destination.next(this._trailingValue),this._trailingValue=null,this._hasTrailingValue=!1),t.unsubscribe(),this.remove(t),this.throttled=null)}}function h(t){const{subscriber:e}=t;e.clearThrottle()}var l=n(6782),u=n(8583);const p=["imageContainer"],f=["cropRect"],d=["image"],m=["canvas"],b=function(t,e,n,r){return{top:t,bottom:e,left:n,right:r}};let O=(()=>{class t{constructor(t){this.cdr=t,this.croppedImage=new i.vpe,this.isCropping=new i.vpe,this.topOffset="10px",this.bottomOffset="10px",this.leftOffset="10px",this.rightOffset="10px",this.onDestroyed$=new r.xQ,this.borderDragged$=new r.xQ}ngOnInit(){this.borderDragged$.pipe(function(t,e=c.P,n=a){return r=>r.lift(new s(t,e,n.leading,n.trailing))}(100),(0,l.R)(this.onDestroyed$)).subscribe(({event:{viewPortX:t,viewPortY:e},border:n})=>{const r=this.imgContainerElement.nativeElement.getBoundingClientRect(),i=t-r.x,o=e-r.y;switch(n){case"left":this.leftOffset=i>=0?i+"px":this.leftOffset;break;case"right":const t=r.width-i;this.rightOffset=t>=0?t+"px":this.rightOffset;break;case"top":this.topOffset=o>=0?o+"px":this.topOffset;break;case"bottom":const e=r.height-o;this.bottomOffset=e>=0?e+"px":this.bottomOffset}this.cdr.detectChanges()})}ngOnChanges(t){this.leftOffset=this.topOffset=this.rightOffset=this.bottomOffset="10px"}ngOnDestroy(){this.onDestroyed$.next(),this.onDestroyed$.complete()}onDragStart(t,e){this.currentlyDragging=t;const n=new Image;n.src="data:image/gif;base64,R0lGODlhAQABAIAAAAUEBAAAACwAAAAAAQABAAACAkQBADs=",e.dataTransfer.setDragImage(n,0,0)}onDragOver(t){this.borderDragged$.next({event:{viewPortX:t.clientX,viewPortY:t.clientY},border:this.currentlyDragging})}onTouchDrag(t,e){e.preventDefault();const n=e.touches[0];this.borderDragged$.next({event:{viewPortX:n.clientX,viewPortY:n.clientY},border:t})}cropImage(){const t=this.imageElement.nativeElement,e=this.cropRectElement.nativeElement.getBoundingClientRect(),n=this.imgContainerElement.nativeElement.getBoundingClientRect(),r=t.naturalWidth/n.width,i=t.naturalHeight/n.height,o=(e.left-n.left)*r,c=(e.top-n.top)*i,a=e.width*r,s=e.height*i;this.isCropping.emit(!0);const g=this.canvasElement.nativeElement;g.width=a,g.height=s,g.getContext("2d").drawImage(t,o,c,a,s,0,0,a,s),g.toBlob(t=>{const e=new FileReader;e.readAsDataURL(t),e.onloadend=()=>{this.croppedImage.emit(e.result),this.isCropping.emit(!1)}})}}return t.\u0275fac=function(e){return new(e||t)(i.Y36(i.sBO))},t.\u0275cmp=i.Xpm({type:t,selectors:[["app-image-crop"]],viewQuery:function(t,e){if(1&t&&(i.Gf(p,5),i.Gf(f,5),i.Gf(d,5),i.Gf(m,5)),2&t){let t;i.iGM(t=i.CRH())&&(e.imgContainerElement=t.first),i.iGM(t=i.CRH())&&(e.cropRectElement=t.first),i.iGM(t=i.CRH())&&(e.imageElement=t.first),i.iGM(t=i.CRH())&&(e.canvasElement=t.first)}},inputs:{imageData:"imageData"},outputs:{croppedImage:"croppedImage",isCropping:"isCropping"},features:[i.TTD],decls:18,vars:7,consts:[[1,"crop-container"],[1,"image-container",3,"dragover"],["imageContainer",""],[3,"src"],["image",""],[1,"crop-rect",3,"ngStyle"],["cropRect",""],["draggable","true",1,"crop-rect-right",3,"dragstart","touchmove"],[1,"circle"],["draggable","true",1,"crop-rect-left",3,"dragstart","touchmove"],["draggable","true",1,"crop-rect-bottom",3,"dragstart","touchmove"],["draggable","true",1,"crop-rect-top",3,"dragstart","touchmove"],[2,"display","none"],["canvas",""]],template:function(t,e){1&t&&(i.TgZ(0,"div"),i.TgZ(1,"div",0),i.TgZ(2,"div",1,2),i.NdJ("dragover",function(t){return e.onDragOver(t)}),i._UZ(4,"img",3,4),i.TgZ(6,"div",5,6),i.TgZ(8,"div",7),i.NdJ("dragstart",function(t){return e.onDragStart("right",t)})("touchmove",function(t){return e.onTouchDrag("right",t)}),i._UZ(9,"div",8),i.qZA(),i.TgZ(10,"div",9),i.NdJ("dragstart",function(t){return e.onDragStart("left",t)})("touchmove",function(t){return e.onTouchDrag("left",t)}),i._UZ(11,"div",8),i.qZA(),i.TgZ(12,"div",10),i.NdJ("dragstart",function(t){return e.onDragStart("bottom",t)})("touchmove",function(t){return e.onTouchDrag("bottom",t)}),i._UZ(13,"div",8),i.qZA(),i.TgZ(14,"div",11),i.NdJ("dragstart",function(t){return e.onDragStart("top",t)})("touchmove",function(t){return e.onTouchDrag("top",t)}),i._UZ(15,"div",8),i.qZA(),i.qZA(),i.qZA(),i.qZA(),i._UZ(16,"canvas",12,13),i.qZA()),2&t&&(i.xp6(4),i.Q6J("src",e.imageData,i.LSH),i.xp6(2),i.Q6J("ngStyle",i.l5B(2,b,e.topOffset,e.bottomOffset,e.leftOffset,e.rightOffset)))},directives:[u.PC],styles:[".crop-container[_ngcontent-%COMP%]{text-align:center}.image-container[_ngcontent-%COMP%]{margin:auto;display:inline-block;position:relative}.image-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;max-height:calc(100vh - 30px);-o-object-fit:scale-down;object-fit:scale-down}.image-container[_ngcontent-%COMP%]   .crop-rect[_ngcontent-%COMP%]{position:absolute}.image-container[_ngcontent-%COMP%]   .crop-rect-bottom[_ngcontent-%COMP%], .image-container[_ngcontent-%COMP%]   .crop-rect-left[_ngcontent-%COMP%], .image-container[_ngcontent-%COMP%]   .crop-rect-right[_ngcontent-%COMP%], .image-container[_ngcontent-%COMP%]   .crop-rect-top[_ngcontent-%COMP%]{position:absolute;background-color:red}.image-container[_ngcontent-%COMP%]   .crop-rect-left[_ngcontent-%COMP%]{left:0;height:100%;width:2px;cursor:ew-resize}.image-container[_ngcontent-%COMP%]   .crop-rect-right[_ngcontent-%COMP%]{right:0;height:100%;width:2px;cursor:ew-resize}.image-container[_ngcontent-%COMP%]   .crop-rect-top[_ngcontent-%COMP%]{top:0;width:100%;height:2px;cursor:ns-resize}.image-container[_ngcontent-%COMP%]   .crop-rect-bottom[_ngcontent-%COMP%]{bottom:0;width:100%;height:2px;cursor:ns-resize}.image-container[_ngcontent-%COMP%]   .crop-rect[_ngcontent-%COMP%]   .circle[_ngcontent-%COMP%]{border-radius:10px;background-color:red;width:20px;height:20px;position:absolute}.image-container[_ngcontent-%COMP%]   .crop-rect-left[_ngcontent-%COMP%]   .circle[_ngcontent-%COMP%], .image-container[_ngcontent-%COMP%]   .crop-rect-right[_ngcontent-%COMP%]   .circle[_ngcontent-%COMP%]{top:calc(50% - 10px);left:-10px}.image-container[_ngcontent-%COMP%]   .crop-rect-bottom[_ngcontent-%COMP%]   .circle[_ngcontent-%COMP%], .image-container[_ngcontent-%COMP%]   .crop-rect-top[_ngcontent-%COMP%]   .circle[_ngcontent-%COMP%]{left:calc(50% - 10px);top:-10px}"],changeDetection:0}),t})()},5310:function(t,e,n){"use strict";n.d(e,{i:function(){return i}});var r=n(7574);class i{static convertFileToImageBase64(t){return new r.y(e=>{const n=new FileReader;n.onloadend=t=>{e.next({imageData:t.target.result}),e.complete()},n.onerror=()=>e.error(),n.readAsDataURL(t)})}}},9156:function(t,e,n){"use strict";n.d(e,{s:function(){return g},T:function(){return h}});const r=["J","Z","I","H","G","F","E","D","C","B","A"],i=["X","W","U","T","R","Q","P","N","M","L","K"];var o=(()=>(function(t){t[t.before1968=0]="before1968",t[t.between1968_1999=1]="between1968_1999",t[t.after2000=2]="after2000"}(o||(o={})),o))();const c=[2,7,6,5,4,3,2];function a(t,e){return t=Math.ceil(t),e=Math.floor(e),Math.floor(Math.random()*(e-t+1))+t}function s(t,e){let n=0;for(let r=0;r<7;r++)n+=e[r]*c[r];switch(t){case"T":case"G":n+=4}const o=Math.floor(n%11);switch(t){case"S":case"T":return r[o];case"F":case"G":return i[o]}return" "}function g(t,e){const n=function(t){return t<1968?o.before1968:t<=1999?o.between1968_1999:o.after2000}(e);let r;const i=[];switch(t){case"S":case"T":switch(n){case o.before1968:r="S",i.push(a(0,1));break;case o.between1968_1999:switch(r="S",i.push(a(6,9)),i[0]){case 6:i.push(a(8,9));break;default:i.push(a(0,9))}break;case o.after2000:r="T";const t=a(0,e%100);i.push(Math.floor(t/10)),i.push(t%10)}break;case"F":case"G":switch(n){case o.before1968:r="F",i.push(a(0,1));break;case o.between1968_1999:switch(r="F",i.push(a(6,9)),i[0]){case 6:i.push(a(8,9));break;default:i.push(a(0,9))}break;case o.after2000:r="G";const t=a(0,e%100);i.push(Math.floor(t/10)),i.push(t%10)}}for(let o=i.length;o<7;o++)i.push(a(0,9));const c=s(r,i);return[r,...i,c].join("")}function h(t){if("S"!==(t=t.toUpperCase()).charAt(0)&&"T"!==t.charAt(0)&&"F"!==t.charAt(0)&&"G"!==t.charAt(0))return!1;if(!t.match("[S,T,F,G](\\d){7}\\w"))return!1;const e=t.substr(1,7).split("").map(t=>+t),n=s(t.charAt(0),e);return t.charAt(8)===n}},2541:function(t,e,n){"use strict";n.d(e,{u:function(){return h}});var r=n(8002),i=n(7519),o=n(4458),c=n(1307),a=n(8634),s=n(8229),g=n(7716);let h=(()=>{class t{constructor(){this.secondsTickers$=(0,a.H)(0,150).pipe((0,r.U)(()=>Date.now()),(0,i.x)((t,e)=>Math.trunc(e/1e3)===Math.trunc(t/1e3)),(0,o.O)(()=>new s.t(1)),(0,c.x)())}getSeconds$(){return this.secondsTickers$}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=g.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()}}]);